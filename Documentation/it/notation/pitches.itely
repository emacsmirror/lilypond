@c -*- coding: utf-8; mode: texinfo; documentlanguage: it -*-
@ignore
   Translation of GIT committish: 1b92bf647d14c1f2785f47568e78e4bfa7dfcb45

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  For details, see the Contributors'
    Guide, node Updating translation committishes..
@end ignore

@c \version "2.25.4"

@c Translators: Federico Bruni
@c Translation checkers: Luca Rossetto Casel

@node Pitches
@section Altezze

@lilypondfile[quote]{snippets/pitches-headword.ly}

Questa sezione tratta il modo in cui si determina l'altezza delle note.  Occorre
considerare tre aspetti: input, modifica e output.

@menu
* Writing pitches::
* Changing multiple pitches::
* Displaying pitches::
* Note heads::
@end menu


@node Writing pitches
@subsection Inserimento delle altezze

Questa sezione spiega come indicare l'altezza delle note.  Ci sono due
modi di collocare le note in una determinata ottava: il modo assoluto e il
modo relativo.  Nella maggioranza dei casi il modo relativo è più funzionale.

@menu
* Absolute octave entry::
* Relative octave entry::
* Accidentals::
* Note names in other languages::
@end menu


@node Absolute octave entry
@unnumberedsubsubsec Ottava assoluta

@cindex nome di un'altezza
@cindex altezza
@cindex assoluto
@cindex ottava assoluta
@cindex assoluta, ottava

Le altezze, se non si adotta una lingua diversa, sono scritte in
notazione olandese, che usa le lettere minuscole dalla @code{a} (La)
alla @code{g} (Sol).  Le note @code{c} (Do) e @code{b} (Si) vengono scritte
un'ottava sotto il Do centrale.

@c don't use c' here.
@lilypond[verbatim,quote]
{
  \clef bass
  c4 d e f
  g4 a b c
  d4 e f g
}
@end lilypond

@cindex segno di modifica dell'ottava

@funindex '
@funindex ,

Si possono indicare altre ottave con l'apice singolo@tie{}(@code{'})
o la virgola@tie{}(@code{,}).  Ogni@tie{}@code{'} alza l'altezza di
un'ottava; ogni@tie{}@code{,} abbassa l'altezza di un'ottava.

@lilypond[verbatim,quote]
{
  \clef treble
  c'4 e' g' c''
  c'4 g b c'
  \clef bass
  c,4 e, g, c
  c,4 g,, b,, c,
}
@end lilypond

@funindex \fixed
I normali segni di ottava possono essere inseriti una sola volta se si
imposta un'altezza di riferimento dopo @code{\fixed} e prima della musica.
Le altezze inserite in un blocco @code{\fixed} hanno bisogno dei segni @code{'}
o@tie{}@code{,} solo quando si trovano sopra o sotto l'ottava dell'altezza di
riferimento.

@lilypond[verbatim,quote]
{
  \fixed c' {
    \clef treble
    c4 e g c'
    c4 g, b, c
  }
  \clef bass
  \fixed c, {
    c4 e g c'
    c4 g, b, c
  }
}
@end lilypond

Le altezze dell'espressione musicale che segue @code{\fixed} non cambiano
se racchiuse da un blocco @code{\relative}, che vedremo tra poco.

@morerefs
Glossario musicale:
@rglosnamed{Pitch names,Nomi delle altezze}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.
@endmorerefs


@node Relative octave entry
@unnumberedsubsubsec Ottava relativa

@cindex relativo
@cindex ottava relativa
@cindex relativa, ottava

@funindex \relative

L'inserimento delle note con l'ottava assoluta costringe a specificare
l'ottava di ogni singola nota.  Al contrario, se si usa l'ottava relativa,
ogni ottava è determinata dall'ultima nota: se si cambia l'ottava di una
nota, cambieranno anche le ottave di tutte le note successive.

La modalità relativa deve essere impostata in modo esplicito col
comando @code{\relative}:

@example
\relative @var{altezza_di_riferimento} @var{espressione_musicale}
@end example

In modalità relativa ogni nota è collocata il più vicino
possibile a quella precedente.  Questo significa che l'ottava
di ogni altezza all'interno di @code{@var{espressione_musicale}} viene
calcolata nel modo seguente:

@itemize
@item
In assenza di segni di cambiamento d'ottava, l'ottava
di un'altezza viene calcolata in modo che l'intervallo con la nota
precedente sia inferiore a una quinta.  Tale intervallo è
determinato senza considerare gli accidenti.

@item
Si può aggiungere un segno di cambiamento d'ottava@tie{}@code{'} o@tie{}@code{,}
per collocare l'altezza di una nota all'ottava superiore o inferiore a
quella di riferimento.

@item
È possibile usare più di un segno di cambiamento d'ottava.  Per esempio,
@code{''}@tie{}e@tie{}@code{,,} modificano l'altezza di due
ottave.

@item
L'altezza della prima nota è relativa a
@code{@var{altezza_di_riferimento}}.  @code{@var{altezza_di_riferimento}} è
specificato nel modo di ottava assoluta.  Quale di queste opzioni è la
più  conveniente?

@table @asis
@item un'ottava del @code{c}
Identificare il Do centrale con @code{c'} è molto semplice, quindi trovare
le ottave del @code{c} (Do) sarà altrettanto semplice.  Se la musica inizia
con @code{gis} sopra @code{c'''}, si scriverà qualcosa simile a
@code{\relative @{ gis''' @dots{} @}}

@item un'ottava della prima nota
Scrivere @code{\relative @{ gis''' @dots{} @}} è un modo semplice per
determinare l'altezza assoluta della prima nota dell'espressione musicale.

@item nessuna altezza di riferimento esplicita
La forma @code{\relative @{gis''' @dots{} @}} è una versione compatta
dell'opzione precedente: la prima nota dentro l'espressione musicale è scritta
come altezza assoluta.  In questo caso equivale a scegliere @code{f} come
altezza di riferimento.
@end table

La documentazione di solito usa l'ultima opzione.
@end itemize

Ecco il modo relativo in azione:

@lilypond[verbatim,quote]
\relative {
  \clef bass
  c d e f
  g a b c
  d e f g
}
@end lilypond

I segni di cambiamento d'ottava si impiegano per gli intervalli più ampi
di quello di quarta:

@lilypond[verbatim,quote]
\relative {
  c'' g c f,
  c' a, e'' c
}
@end lilypond

Una sequenza di note senza segni di ottava può tuttavia
comprendere intervalli di grande estensione:

@lilypond[verbatim,quote]
\relative {
  c f b e
  a d g c
}
@end lilypond

Nel caso di blocchi @code{\relative} annidati, il blocco @code{\relative} più
interno inizia con la propria altezza di riferimento, indipendentemente dal
@code{\relative} più esterno.

@lilypond[verbatim,quote]
\relative {
  c' d e f
  \relative {
    c'' d e f
  }
}
@end lilypond

@code{\relative} non ha effetto sui blocchi @code{\chordmode}.

@lilypond[verbatim,quote]
\new Staff {
  \relative c''' {
    \chordmode { c1 }
  }
  \chordmode { c1 }
}
@end lilypond

@code{\relative} non può essere inserito all'interno dei blocchi @code{\chordmode}.

La musica all'interno di un blocco @code{\transpose} è considerata in
notazione d'ottava assoluta, a meno che non sia incluso il
blocco @code{\relative}.

@lilypond[verbatim,quote]
\relative {
  d' e
  \transpose f g {
    d e
    \relative {
      d' e
    }
  }
}
@end lilypond


@cindex accordo, e ottava relativa
@cindex ottava relativa, e accordi

Se l'elemento precedente è un accordo, il posizionamento dell'ottava della
nota o dell'accordo che segue è riferito alla prima nota dell'accordo
stesso.  All'interno degli accordi la nota successiva è sempre relativa a
quella precedente.  Esaminate con attenzione l'esempio seguente, e in
particolare le note @code{c}.

@lilypond[verbatim,quote]
\relative {
  c'
  <c e g>
  <c' e g'>
  <c, e, g''>
}
@end lilypond

Come spiegato sopra, il riferimento delle altezze a un'ottava è calcolato in
base ai soli nomi delle note, senza considerare le alterazioni.  Dunque un
Mi doppio diesis che segue un Si verrà posizionato sopra, mentre un Fa
doppio bemolle sarà posizionato sotto.  In altre parole, un intervallo di
quarta aumentata due volte viene considerato più piccolo di una quinta
diminuita due volte, indipendentemente dal numero di semitoni contenuto
in ogni intervallo.

@lilypond[verbatim,quote]
\relative {
  c''2 fis
  c2 ges
  b2 eisis
  b2 feses
}
@end lilypond

In situazioni complesse, può essere utile cambiare l'altezza di riferimento senza
tener conto di ciò che è successo prima, usando @code{\resetRelativeOctave}:

@lilypond[verbatim,quote]
\relative {
  <<
    { c''2 d }
    \\
    { e,,2 f }
  >>
  \resetRelativeOctave c''
  c2
}
@end lilypond

@funindex \resetRelativeOctave


@morerefs
Glossario musicale:
@rglosnamed{fifth,quinta},
@rglosnamed{interval,intervallo},
@rglosnamed{Pitch names,Nomi delle altezze}.

Guida alla notazione:
@ref{Octave checks}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{RelativeOctaveMusic}.
@endmorerefs

@cindex ottava relativa, e trasposizione
@cindex trasposizione, e ottava relativa

@funindex \transpose
@funindex \chordmode
@funindex \relative



@node Accidentals
@unnumberedsubsubsec Alterazioni

@cindex alterazione
@cindex armatura di chiave
@cindex chiave

@c duplicated in Key signature and Accidentals
@warning{I nuovi utenti sono talvolta confusi dalla gestione delle
alterazioni e delle armature di chiave.  In LilyPond i nomi delle
note specificano le altezze; le armature e le chiavi determinano
come queste altezze debbano essere rappresentate.
Una nota non alterata come@tie{}@code{c} significa @q{Do naturale},
indipendentemente dall'armatura o dalla chiave.  Per maggiori informazioni
si veda @rlearningnamed{Pitches and key signatures, Altezze e armature di chiave}.}

@cindex nome nota, olandese
@cindex nome nota, predefinito
@cindex nota, nome predefinito
@cindex diesis
@cindex bemolle
@cindex doppio diesis
@cindex diesis, doppio
@cindex doppio bemolle
@cindex bemolle, doppio
@cindex segno di bequadro
@cindex altezza naturale

Nella modalità di notazione predefinita un @notation{diesis} si ottiene aggiungendo @code{is}
al nome della nota, un @notation{bemolle} aggiungendo @code{es}.  Come potete
immaginare, un @notation{doppio diesis} o @notation{doppio bemolle}
si ottengono aggiungendo @code{isis} o @code{eses}.  Questa sintassi è
desunta dalla notazione olandese.  Per usare altri nomi
per le alterazioni, si veda @ref{Note names in other languages}.

@lilypond[verbatim,quote,fragment]
\relative c'' { ais1 aes aisis aeses }
@end lilypond

Un'altezza naturale è indicata con il semplice nome della nota; non è richiesto
alcun suffisso.  Un segno di bequadro apparirà automaticamente quando occorre
cancellare l'armatura di chiave o l'effetto di un'alterazione precedente.

@lilypond[verbatim,quote,fragment]
\relative c'' { a4 aes a2 }
@end lilypond

@cindex quarto di tono
@cindex semi-bemolle
@cindex semi-diesis

È possibile indicare alterazioni di quarti di tono. Ecco una serie di Do
con altezza crescente:

@lilypond[verbatim,quote,fragment]
\relative c'' { ceseh1 ces ceh c cih cis cisih }
@end lilypond



@cindex alterazione, di sicurezza
@cindex alterazione, di cortesia
@cindex alterazione, tra parentesi
@cindex alterazione di sicurezza
@cindex alterazione di cortesia
@cindex alterazione tra parentesi

@funindex ?
@funindex !


Di norma le alterazioni vengono mostrate automaticamente, ma è
possibile anche inserirle manualmente.  Si può forzare l'inserimento di
un'alterazione di sicurezza aggiungendo il punto esclamativo@tie{}@code{!}
dopo l'altezza.  Un'alterazione di cortesia (ovvero un'alterazione compresa
tra parentesi) si ottiene aggiungendo il punto interrogativo@tie{}@code{?} dopo
l'altezza.

@lilypond[verbatim,quote,fragment]
\relative c'' { cis cis cis! cis? c c c! c? }
@end lilypond

@cindex alterazione, e legatura di valore
@cindex legatura di valore, e alterazione

Se una nota è prolungata attraverso una legatura di valore, l'alterazione
viene ripetuta solo all'inizio di un nuovo sistema:

@lilypond[verbatim,quote,fragment,ragged-right]
\relative c'' {
  cis1~ 1~
  \break
  cis
}
@end lilypond


@snippets

@cindex nascondere alterazioni, su note legate all'inizio del sistema
@cindex alterazioni, nascondere, su note legate all'inizio del sistema
@lilypondfile[verbatim,quote,texidoc,doctitle,ragged-right]
{snippets/hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system.ly}

@cindex segno di bequadro, supplementare, impedire
@cindex bequadro, supplementare, impedire
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/preventing-extra-naturals-from-being-automatically-added.ly}

@morerefs
Glossario musicale:
@rglosnamed{sharp,diesis},
@rglosnamed{flat,bemolle},
@rglosnamed{double sharp,doppio diesis},
@rglosnamed{double flat,doppio bemolle},
@rglosnamed{Pitch names,Nomi delle altezze},
@rglosnamed{quarter tone,quarto di tono}.

Manuale di apprendimento:
@rlearningnamed{Pitches and key signatures, Altezze e armature di chiave}.

Guida alla notazione:
@ref{Automatic accidentals},
@ref{Annotational accidentals (musica ficta)},
@ref{Note names in other languages}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Accidental_engraver},
@rinternals{Accidental},
@rinternals{AccidentalCautionary},
@rinternals{accidental-interface}.
@endmorerefs

@cindex quarto di tono, alterazione
@cindex alterazione di un quarto di tono

@knownissues
Poiché non esistono standard universalmente accettati per indicare
le alterazioni di quarto di tono, i simboli impiegati da LilyPond
non si riferiscono ad alcuno standard.


@node Note names in other languages
@unnumberedsubsubsec Nomi delle note in altre lingue

@cindex nome nota, altre lingue
@cindex nome altezza, altre lingue
@cindex lingua, nomi delle note in un'altra
@cindex lingua, nomi delle altezze in un'altra

LilyPond comprende insiemi predefiniti di nomi di note e alterazioni in
altre lingue.  La scelta della lingua si fa solitamente all'inizio del
file; l'esempio seguente è scritto in notazione italiana:

@lilypond[quote,verbatim]
\language "italiano"

\relative {
  do' re mi sib
}
@end lilypond

Le lingue disponibili e i tipi di notazione che definiscono sono:

@quotation
@multitable {@w{@code{português} o}} {@code{do} @code{re}/@code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}}
@headitem Lingua
  @tab Nomi delle note
@item @code{nederlands}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{bes} @code{b}
@item @code{català} o@*@ @code{catalan}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{deutsch}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{english}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{bf}/@code{b-flat} @code{b}
@item @code{español} o@*@ @code{espanol}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{français}
  @tab @code{do} @code{ré}/@code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{italiano}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{norsk}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{português} o@*@ @code{portugues}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{suomi}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{svenska}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{vlaams}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@end multitable
@end quotation

Oltre ai nomi delle note, anche i suffissi per le alterazioni
possono variare a seconda della lingua adottata:

@quotation
@multitable {@w{@code{português} o}} {@code{s}/@code{-sharp}} {@code{f}/@code{-flat}} {@code{ss}/@code{x}/@code{-sharpsharp}} {@code{ff}/@code{-flatflat}}
@headitem Lingua
  @tab diesis @tab bemolle @tab doppio diesis @tab doppio bemolle
@item @code{nederlands}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{català} o@*@ @code{catalan}
  @tab @code{d}/@code{s} @tab @code{b} @tab @code{dd}/@code{ss}
    @tab @code{bb}
@item @code{deutsch}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{english}
  @tab @code{s}/@code{-sharp} @tab @code{f}/@code{-flat}
    @tab @code{ss}/@code{x}/@code{-sharpsharp}
    @tab @code{ff}/@code{-flatflat}
@item @code{español} o@*@ @code{espanol}
  @tab @code{s} @tab @code{b} @tab @code{ss}/@code{x} @tab @code{bb}
@item @code{français}
  @tab @code{d} @tab @code{b} @tab @code{dd}/@code{x} @tab @code{bb}
@item @code{italiano}
  @tab @code{d} @tab @code{b} @tab @code{dd} @tab @code{bb}
@item @code{norsk}
  @tab @code{iss}/@code{is} @tab @code{ess}/@code{es}
    @tab @code{ississ}/@code{isis} @tab @code{essess}/@code{eses}
@item @code{português} o@*@ @code{portugues}
  @tab @code{s} @tab @code{b} @tab @code{ss} @tab @code{bb}
@item @code{suomi}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{svenska}
  @tab @code{iss} @tab @code{ess} @tab @code{ississ} @tab @code{essess}
@item @code{vlaams}
  @tab @code{k} @tab @code{b} @tab @code{kk} @tab @code{bb}
@end multitable
@end quotation

In olandese, norvegese e finlandese @code{aes} viene contratto in @code{as};
in olandese e norvegese, tuttavia, entrambe le forme sono accettate da
LilyPond.  Lo stesso vale per @code{es} e @code{ees}, @code{aeses} e
@code{ases}, e infine @code{eeses} e @code{eses}.

In tedesco e finlandese, LilyPond fornisce anche la forma più frequente
@code{asas} per @code{ases}.

@lilypond[verbatim,quote,fragment]
\relative c'' { a2 as e es a ases e eses }
@end lilypond


@cindex microtono
@cindex semi-diesis
@cindex semi-bemolle
@cindex sesqui-diesis
@cindex sesqui-bemolle

In alcune forme musicali vengono usati i microtoni, le cui alterazioni sono
frazioni di un @q{normale} diesis o bemolle.  La seguente tabella elenca i
nomi delle note per le alterazioni di un quarto di tono; i
prefissi @notation{semi-} e @notation{sesqui-} significano rispettivamente
@q{metà} e @q{uno e mezzo}.

@quotation
@multitable {@w{@code{português} o}} {@b{semi-diesis}} {@b{semi-bemolle}} {@b{sesqui-diesis}} {@code{esseh/@code{eseh}}}
@headitem Lingua
  @tab semi-diesis @tab semi-bemolle @tab sesqui-diesis @tab sesqui-bemolle
@item @code{nederlands}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{català} o@*@ @code{catalan}
  @tab @code{qd}/@code{qs} @tab @code{qb} @tab @code{tqd}/@code{tqs}
   @tab @code{tqb}
@item @code{deutsch}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{english}
  @tab @code{qs} @tab @code{qf} @tab @code{tqs} @tab @code{tqf}
@item @code{español} o@*@ @code{espanol}
  @tab @code{cs} @tab @code{cb} @tab @code{tcs} @tab @code{tcb}
@item @code{français}
  @tab @code{sd} @tab @code{sb} @tab @code{dsd} @tab @code{bsb}
@item @code{italiano}
  @tab @code{sd} @tab @code{sb} @tab @code{dsd} @tab @code{bsb}
@item @code{norsk}
  @tab @code{ih} @tab @code{eh} @tab @code{issih}/@code{isih}
   @tab @code{esseh}/@code{eseh}
@item @code{português} o@*@ @code{portugues}
  @tab @code{sqt} @tab @code{bqt} @tab @code{stqt} @tab @code{btqt}
@item @code{suomi}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{svenska}
  @tab @code{ih} @tab @code{eh} @tab @code{issih} @tab @code{esseh}
@item @code{vlaams}
  @tab @code{hk} @tab @code{hb} @tab @code{khk} @tab @code{bhb}
@end multitable
@end quotation

In tedesco, esistono simili contrazioni dei nomi per i microtoni così come
nelle normali altezze descritte sopra.

@lilypond[verbatim,quote,fragment]
\language "deutsch"

\relative c'' { asah2 eh aih eisih }
@end lilypond

Gran parte delle lingue presentate qui sono comunemente associate
alla musica classica occidentale, nota anche come
@notation{Common Practice Period}.  Sono tuttavia supportati
anche altezze e sistemi di accordatura alternativi: si veda
@ref{Common notation for non-Western music}.

@morerefs
Glossario musicale:
@rglosnamed{Pitch names,Nomi delle altezze},
@rglosnamed{Common Practice Period,Periodo di pratica comune}.

Guida alla notazione:
@ref{Common notation for non-Western music}.

File installati:
@file{scm/define-note-names.scm}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.
@endmorerefs


@node Changing multiple pitches
@subsection Modifica di più altezze

Questa sezione tratta il modo di modificare le altezze delle note.

@menu
* Octave checks::
* Transpose::
* Inversion::
* Retrograde::
* Modal transformations::
@end menu

@node Octave checks
@unnumberedsubsubsec Controlli di ottava

@cindex correzione dell'ottava
@cindex controllo dell'ottava
@cindex ottava, controllo
@cindex controllo delle altezze

@c `@funindex \=' is auto-generated
@funindexpre =
@funindex \octaveCheck
@funindex controlpitch

In modalità relativa è facile dimenticare un segno di cambiamento d'ottava.
I controlli di ottava permettono di rilevare questi errori più facilmente: infatti,
generano un avviso e correggono l'ottava se una nota si trova in un'ottava
diversa dal previsto.

Per controllare l'ottava di una nota, occorre specificare l'ottava assoluta
dopo il simbolo@tie{}@code{=}.  Questo esempio genererà un avviso
(e cambierà l'altezza) perché la seconda nota è l'ottava assoluta
@code{d''} invece di @code{d'}, come indicato dalla correzione di ottava.

@lilypond[verbatim,quote]
\relative {
  c''2 d='
  e2 f
}
@end lilypond

L'ottava in cui si trovano le note può essere controllata anche col
comando @code{\octaveCheck@tie{}@var{altezza_di_controllo}}.
L'@code{@var{altezza_di_controllo}} è specificata in modo assoluto.  Questo
comando controlla che l'intervallo tra la nota precedente e
l'@code{@var{altezza_di_controllo}} sia compresa in una quinta (ovvero secondo
il normale calcolo della modalità relativa).  Se il controllo fallisce, compare
un avviso.  Benché la nota precedente non sia modificata, le note successive
sono relative al valore corretto.

@lilypond[verbatim,quote]
\relative {
  c''2 d
  \octaveCheck c'
  e2 f
}
@end lilypond

Nelle due battute che seguono, il primo e il terzo @code{\octaveCheck}
falliscono, mentre il secondo non fallisce.

@lilypond[verbatim,quote]
\relative {
  c''4 f g f

  c4
  \octaveCheck c'
  f
  \octaveCheck c'
  g
  \octaveCheck c'
  f
}
@end lilypond

@morerefs
Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{RelativeOctaveCheck}.
@endmorerefs


@node Transpose
@unnumberedsubsubsec Trasposizione

@cindex trasporre
@cindex trasposizione
@cindex trasposizione, delle altezze
@cindex trasposizione, delle note
@cindex altezza, trasposizione di
@cindex nota, trasposizione di

@funindex \transpose

Un'espressione musicale può essere trasposta con @code{\transpose}.  La
sintassi è

@example
\transpose @var{altezza_di_partenza} @var{altezza_di_arrivo} @var{espressione_musicale}
@end example

@noindent
Significa che @code{@var{espressione_musicale}} viene trasposto
dell'intervallo compreso tra le altezze @code{@var{altezza_di_partenza}} e
@code{@var{altezza_di_arrivo}}: qualsiasi nota che presenti un'altezza
corrispondente all'@code{@var{altezza_di_partenza}} viene modificata
in @code{@var{altezza_di_arrivo}}, e qualsiasi altra nota viene
trasposta dello stesso intervallo.  Entrambe le altezze sono inserite
in modalità assoluta.

@warning{La musica all'interno di un blocco @code{@bs{}transpose} è assoluta
a meno che il blocco non includa un @code{@bs{}relative}.}

Prendiamo come esempio un brano scritto in Re maggiore.  Possiamo
trasportarlo in Mi maggiore; si noti come anche l'armatura di chiave
venga trasposta automaticamente.

@lilypond[verbatim,quote]
\transpose d e {
  \relative {
    \key d \major
    d'4 fis a d
  }
}
@end lilypond

@cindex strumento traspositore
@cindex traspositore, strumento

Se una parte scritta in Do (l'@notation{intonazione reale} abituale) deve
essere suonata su un clarinetto in La (per il quale un La viene rappresentato
da un Do e dunque suona una terza minore più basso), la trasposizione
sarà ottenuta con:

@lilypond[verbatim,quote]
\transpose a c' {
  \relative {
    \key c \major
    c'4 d e g
  }
}
@end lilypond

@noindent
Si noti che @w{@code{\key c \major}} è specificato esplicitamente.  Se
non si specifica un'armatura di chiave, le note verranno trasposte ma
non apparirà alcuna armatura.

@code{\transpose} fa distinzione tra altezze enarmoniche: sia
@w{@code{\transpose c cis}} che @w{@code{\transpose c des}} traspongono
un brano di un semitono più alto.  La prima versione mostrerà i diesis e
le note rimarranno sullo stesso grado della scala, mentre la seconda
versione mostrerà i bemolle sul grado superiore della scala.

@lilypond[verbatim,quote]
music = \relative { c' d e f }
\new Staff {
  \transpose c cis { \music }
  \transpose c des { \music }
}
@end lilypond


@code{\transpose} può essere usato anche in un altro modo, ovvero
per inserire note scritte per uno strumento traspositore.  Gli esempi
precedenti mostrano come inserire altezze in Do (o @notation{intonazione reale})
e mostrare le note di uno strumento traspositore, ma è possibile anche
il contrario: per esempio, se da un insieme di parti strumentali
si volesse ricavare una partitura per il direttore.  Così, per inserire
la parte per una tromba in Si bemolle che inizia con un Mi (intonazione reale
Re), si può scrivere:

@example
musicInBflat = @{ e4 @dots{} @}
\transpose c bes, \musicInBflat
@end example

@noindent
Per stampare questa musica in Fa (ad esempio per riarrangiarla per corno) si
può avvolgere la musica esistente in un altro @code{\transpose}:

@example
musicInBflat = @{ e4 @dots{} @}
\transpose f c' @{ \transpose c bes, \musicInBflat @}
@end example

@noindent
Per maggiori informazioni sugli strumenti traspositori,
si veda @ref{Instrument transpositions}.


@snippets

@cindex trasposizione, altezze, @qq{intelligente}
@cindex altezze, trasposizione @qq{intelligente}
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/transposing-pitches-with-minimum-accidentals-smart-transpose.ly}

@morerefs
Guida alla notazione:
@ref{Instrument transpositions},
@ref{Inversion},
@ref{Modal transformations},
@ref{Relative octave entry},
@ref{Retrograde}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{TransposedMusic}.
@endmorerefs

@funindex \transpose
@funindex \chordmode
@funindex \relative

@knownissues
La conversione relativa non avrà effetto sulle sezioni @code{\transpose},
@code{\chordmode} e @code{\relative} comprese all'interno di un
blocco @code{\relative}.  Per usare la modalità relativa all'interno
di musica trasposta, occorre inserire un ulteriore blocco @code{\relative}
all'interno di @code{\transpose}.

Il comando @code{\transpose} impedisce di stampare le alterazioni triple. Le
sostituisce con un'altezza @q{enarmonicamente equivalente} (per esempio,
Re bemolle al posto di Mi triplo bemolle).


@node Inversion
@unnumberedsubsubsec Inversione

@cindex inversione
@cindex operazione, inversione
@funindex \inversion

Un'espressione musicale può essere invertita e trasposta in una singola
operazione con:

@example
\inversion @var{altezza-di-riferimento} @var{altezza-di-arrivo} @var{espressione_musicale}
@end example

L'@code{@var{espressione_musicale}} viene invertita intervallo per intervallo
intorno all'@code{@var{altezza-di-riferimento}} e poi trasposta in modo che
ci sia una corrispondenza tra @code{@var{altezza-di-riferimento}} e
@code{@var{altezza-di-arrivo}}.

@lilypond[verbatim,quote]
music = \relative { c' d e f }
\new Staff {
  \music
  \inversion d' d' \music
  \inversion d' ees' \music
}
@end lilypond

@warning{I motivi da invertire devono essere scritti in forma assoluta
oppure devono essere prima convertiti in forma assoluta racchiudendoli
in un blocco @code{@bs{}relative}.}

@morerefs
Guida alla notazione:
@ref{Modal transformations},
@ref{Retrograde},
@ref{Transpose}.
@endmorerefs


@node Retrograde
@unnumberedsubsubsec Retrogradazione

@cindex trasformazione retrograda
@cindex retrogradazione, trasformazione
@cindex operazione, retrogradazione
@funindex \retrograde

Un'espressione musicale può essere invertita in modo da produrre il proprio
retrogrado:

@lilypond[verbatim,quote]
music = \relative { c'8. ees16( fis8. a16 b8.) gis16 f8. d16 }

\new Staff {
  \music
  \retrograde \music
}
@end lilypond

@knownissues
@code{\retrograde} è uno strumento piuttosto semplice.  Dato che molti eventi
sono @q{riflessi} (come in uno specchio) invece che scambiati, le modifiche
manuali e i modificatori direzionali per gli estensori di apertura devono essere
aggiunti ai corrispondenti estensori di chiusura: @code{^(} deve essere terminato
da @code{^)}, ogni @code{\<} o @code{\cresc} deve essere terminato da @code{\!}
o @code{\endcr}, ogni @code{\>} o @code{\decr} deve essere terminato da
@code{\enddecr}.  Comandi e modifiche che cambiano le proprietà con un effetto
duraturo causeranno facilmente delle sorprese.

@morerefs
Guida alla notazione:
@ref{Inversion},
@ref{Modal transformations},
@ref{Transpose}.
@endmorerefs


@node Modal transformations
@unnumberedsubsubsec Trasposizioni modali

@cindex trasposizione modale
@cindex modale, trasposizione
@cindex operazione, modale

In una composizione musicale basata su una scala, un motivo viene
frequentemente trasportato in differenti modi.  Può essere
@notation{trasposto} per iniziare in punti diversi della scala o
può essere @notation{invertito} rispetto a un punto cardine della scala.
Può anche essere rovesciato per produrre il @notation{retrogrado}, si veda
@ref{Retrograde}.

@warning{Le note che non si trovano all'interno della scala definita non
vengono trasformate.}

@subsubsubheading Trasposizione modale

@cindex trasposizione modale
@cindex modale, trasposizione
@cindex operazione, trasposizione
@funindex \modalTranspose

Un motivo può essere trasposto entro una certa scala con:

@example
\modalTranspose @var{altezza-di-partenza} @var{altezza-di-arrivo} @var{scala} @var{motif}
@end example

Le note di @var{motif} vengono spostate, se all'interno della @var{scala}, del
numero di gradi della scala dati dall'intervallo tra @var{altezza-di-arrivo}
e @var{altezza-di-partenza}:

@lilypond[verbatim,quote]
diatonicScale = \relative { c' d e f g a b }
motif = \relative { c'8 d e f g a b c }

\new Staff {
  \motif
  \modalTranspose c f \diatonicScale \motif
  \modalTranspose c b, \diatonicScale \motif
}
@end lilypond

È possibile indicare una scala ascendente di qualsiasi lunghezza e con qualsiasi
intervallo:

@lilypond[verbatim,quote]
pentatonicScale = \relative { ges aes bes des ees }
motif = \relative { ees'8 des ges,4 <ges' bes,> <ges bes,> }

\new Staff {
  \motif
  \modalTranspose ges ees' \pentatonicScale \motif
}
@end lilypond

Se usato con una scala cromatica, @code{\modalTranspose} ha un
effetto simile a @code{\transpose}, con in più la possibilità
di specificare i nomi delle note da usare:

@lilypond[verbatim,quote]
chromaticScale = \relative { c' cis d dis e f fis g gis a ais b }
motif = \relative { c'8 d e f g a b c }

\new Staff {
  \motif
  \transpose c f \motif
  \modalTranspose c f \chromaticScale \motif
}
@end lilypond

@subsubsubheading Inversione modale

@cindex inversione modale
@cindex modale, inversione
@cindex operazione, inversione modale
@funindex \modalInversion

Una sequenza di note può essere invertita all'interno di una data scala intorno
a una determinata nota cardine e quindi trasposto, in un'unica operazione, con:

@example
\modalInversion @var{altezza-cardine} @var{altezza-di-arrivo} @var{scala} @var{motif}
@end example

Le note di @var{motif} vengono spostate dello stesso numero di gradi dalla nota
dell'@var{altezza-cardine} all'interno della @var{scala}, ma nella direzione
opposta, e il risultato viene poi spostato all'interno della @var{scala} per
il numero di gradi dato dall'intervallo tra @var{altezza-di-arrivo} e
@var{altezza-cardine}.

Dunque, per invertire intorno a una particolare nota della scala, è necessario
usare il medesimo valore per @var{altezza-cardine} e @var{altezza-di-arrivo}:

@lilypond[verbatim,quote]
octatonicScale = \relative { ees' f fis gis a b c d }
motif = \relative { c'8. ees16 fis8. a16 b8. gis16 f8. d16 }

\new Staff {
  \motif
  \modalInversion fis' fis' \octatonicScale \motif
}
@end lilypond

Per invertire intorno a una nota cardine posta tra altre due note, si inverte
intorno a una della note e poi si traspone di un grado della scala.  Le due
note specificate possono essere interpretate come parentesi del punto cardine:

@lilypond[verbatim,quote]
scale = \relative { c' g' }
motive = \relative { c' c g' c, }

\new Staff {
  \motive
  \modalInversion c' g' \scale \motive
}
@end lilypond

L'operazione combinata di inversione e retrogradazione produce la
retrogradazione inversa:

@lilypond[verbatim,quote]
octatonicScale = \relative { ees' f fis gis a b c d }
motif = \relative { c'8. ees16 fis8. a16 b8. gis16 f8. d16 }

\new Staff {
  \motif
  \retrograde \modalInversion c' c' \octatonicScale \motif
}
@end lilypond

@morerefs
Guida alla notazione:
@ref{Inversion},
@ref{Retrograde},
@ref{Transpose}.
@endmorerefs


@node Displaying pitches
@subsection Aspetto delle altezze

Questa sezione tratta il modo di modificare l'aspetto delle altezze delle note.

@menu
* Clef::
* Key signature::
* Ottava brackets::
* Instrument transpositions::
* Automatic accidentals::
* Alternate accidental glyphs::
* Ambitus::
@end menu


@node Clef
@unnumberedsubsubsec Chiave

@cindex chiave di Sol
@cindex chiave di Do
@cindex chiave di Fa
@cindex chiave di violino
@cindex chiave di contralto
@cindex chiave di tenore
@cindex chiave di basso
@cindex chiave francese
@cindex chiave di soprano
@cindex chiave di mezzosoprano
@cindex chiave di baritono
@cindex chiave di varbaritono
@cindex chiave di subbasso
@cindex chiave
@cindex chiave antica
@cindex antica, chiave
@cindex Sol, chiave di
@cindex Do, chiave di
@cindex Fa, chiave di
@cindex violino, chiave di
@cindex alto, chiave di
@cindex tenore, chiave di
@cindex basso, chiave di
@cindex francese, chiave
@cindex soprano, chiave di
@cindex mezzosoprano, chiave di
@cindex baritono, chiave di
@cindex varbaritono, chiave di
@cindex subbasso, chiave di


@funindex \clef

Senza un comando esplicito, la chiave predefinita in LilyPond è la chiave
di violino (o di @emph{Sol}).

@lilypond[verbatim,quote,fragment,ragged-right]
c'2 c'
@end lilypond

Per cambiare la chiave si usa il comando @code{\clef} seguito dal nome della
chiave.  In tutti gli esempi seguenti viene mostrato il @emph{Do centrale}.

@lilypond[verbatim,quote,fragment]
\clef treble
c'2 c'
\clef alto
c'2 c'
\clef tenor
c'2 c'
\clef bass
c'2 c'
@end lilypond

L'elenco completo di tutti i nomi di chiave possibili si trova in @ref{Clef styles}.
Chiavi speciali, come quelle usate nella musica @emph{antica}, sono descritte
in @ref{Mensural clefs} e @ref{Gregorian clefs}.  La musica che utilizza le
chiavi dell'intavolatura è discussa in @ref{Default tablatures} e
@ref{Custom tablatures}.

@cindex notina, chiave
@cindex citazione in corpo piccolo, chiave
@cindex chiave con notina (citazione in corpo piccolo)

Per mischiare le chiavi quando si usano le notine, leggere come si usano i
comandi @code{\cueClef} e @code{\cueDuringWithClef} descritti in
@ref{Formatting cue notes}.

@cindex chiave traspositrice
@cindex trasposizione, chiave
@cindex trasposizione dell'ottava
@cindex trasposizione opzionale dell'ottava
@cindex chiave di tenore per coro

Aggiungendo@tie{}@code{_8} o@tie{}@code{^8} al nome della chiave, la sua
adozione comporta il trasporto all'ottava rispettivamente inferiore o
superiore, mentre@tie{}@code{_15} e@tie{}@code{^15} traspongono di due ottave.
È possibile usare altri numeri interi, se necessario.  I nomi di chiave
contenenti caratteri non alfabetici devono essere racchiusi tra virgolette

@lilypond[verbatim,quote,fragment]
\clef treble
c'2 c'
\clef "treble_8"
c'2 c'
\clef "bass^15"
c'2 c'
\clef "alto_2"
c'2 c'
\clef "G_8"
c'2 c'
\clef "F^5"
c'2 c'
@end lilypond

L'ottavazione opzionale si può ottenere racchiudendo l'argomento numerico
tra parentesi tonde o quadre:

@lilypond[verbatim,quote,fragment]
\clef "treble_(8)"
c'2 c'
\clef "bass^[15]"
c'2 c'
@end lilypond

Le altezze vengono mostrate come se l'argomento numerico fosse
inserito senza parentesi.

Se c'è un cambio di chiave quando si interrompe la linea, il simbolo della
nuova chiave viene ripetuto alla fine della linea precedente, come chiave
di @emph{avviso}, e all'inizio di quella successiva.  Tale chiave di
@emph{precauzione} può essere soppressa.

@lilypond[verbatim,quote,fragment]
\clef treble { c'2 c' } \break
\clef bass { c'2 c' } \break
\clef alto
  \set Staff.explicitClefVisibility = #end-of-line-invisible
  { c'2 c' } \break
  \unset Staff.explicitClefVisibility
\clef bass { c'2 c' } \break
@end lilypond

Una chiave che è già stata visualizzata non viene ristampata se viene
ripetuto lo stesso comando @code{\clef} e verrà quindi ignorata.
Si può cambiare tale comportamento predefinito col comando
@code{\set Staff.forceClef = ##t}.

@lilypond[verbatim,quote,fragment]
  \clef treble
  c'1
  \clef treble
  c'1
  \set Staff.forceClef = ##t
  c'1
  \clef treble
  c'1
@end lilypond

@noindent
Per essere più precisi, non è proprio il comando @code{\clef} a stampare
la chiave.  Questo comando imposta o cambia una proprietà dell'incisore
@code{Clef_engraver}, cui spetta la decisione se stampare o meno una chiave
nel rigo attuale.  La proprietà @code{forceClef} scavalca questa decisione
localmente in modo da ristampare la chiave una volta.

Quando c'è un cambio di chiave manuale, il glifo della chiave cambiata sarà
più piccolo del normale.  Tale comportamento può essere modificato.

@lilypond[verbatim,quote,fragment]
  \clef "treble"
  c'1
  \clef "bass"
  c'1
  \clef "treble"
  c'1
  \override Staff.Clef.full-size-change = ##t
  \clef "bass"
  c'1
  \clef "treble"
  c'1
  \revert Staff.Clef.full-size-change
  \clef "bass"
  c'1
  \clef "treble"
  c'1
@end lilypond

@snippets

@cindex chiave, modifica delle proprietà
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/tweaking-clef-properties.ly}

@morerefs
Guida alla notazione:
@ref{Mensural clefs},
@ref{Gregorian clefs},
@ref{Default tablatures},
@ref{Custom tablatures},
@ref{Formatting cue notes}.

File installati:
@file{scm/parser-clef.scm}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Clef_engraver},
@rinternals{Clef},
@rinternals{ClefModifier},
@rinternals{clef-interface}.
@endmorerefs

@knownissues
I numeri di ottavazione assegnati alle chiavi sono trattati come oggetti grafici
separati.  Quindi qualsiasi @code{\override} all'oggetto @var{Clef} dovrà essere
applicato, con un altro @code{\override}, all'oggetto @var{ClefModifier}.

@lilypond[fragment,quote,verbatim]
\new Staff \with {
  \override Clef.color = #(universal-color 'blue)
  \override ClefModifier.color = #(universal-color 'vermillion)
}

\clef "treble_8" c'4
@end lilypond


@node Key signature
@unnumberedsubsubsec Armatura di chiave

@cindex armatura di chiave

@funindex \key

@c duplicated in Key signature and Accidentals
@warning{I nuovi utenti sono talvolta confusi dalla gestione delle
alterazioni e delle armature di chiave.  In LilyPond i nomi delle
note costituiscono l'input grezzo; le armature e le chiavi determinano
come questo venga mostrato.  Una nota non alterata come@tie{}@code{c}
significa @q{Do naturale}, indipendentemente dall'armatura o dalla
chiave.  Per maggiori informazioni si veda @rlearningnamed{Pitches and key signatures, Altezze e armature di chiave}.}

L'armatura di chiave indica la tonalità di un brano.  È costituita da un
insieme di alterazioni (bemolle o diesis) all'inizio del rigo.  L'armatura
di chiave può essere modificata:

@example
\key @var{altezza} @var{modo}
@end example

@funindex \major
@funindex \minor
@funindex \ionian
@funindex \locrian
@funindex \aeolian
@funindex \mixolydian
@funindex \lydian
@funindex \phrygian
@funindex \dorian

@cindex modo ecclesiastico
@cindex modo
@cindex maggiore
@cindex minore
@cindex ionio
@cindex locrio
@cindex eolio
@cindex misolidio
@cindex lidio
@cindex frigio
@cindex dorico

@noindent
@code{@var{modo}} deve essere @code{\major} o @code{\minor}
per ottenere rispettivamente un'armatura di @code{@var{altezza}}-maggiore o
@code{@var{altezza}}-minore.  È anche possibile usare i nomi tradizionali
dei modi, chiamati anche @notation{modi ecclesiastici}:
@code{\ionian}, @code{\dorian}, @code{\phrygian}, @code{\lydian},
@code{\mixolydian}, @code{\aeolian} e @code{\locrian}.

@lilypond[verbatim,quote,fragment]
\relative {
  \key g \major
  fis''1
  f
  fis
}
@end lilypond

Si possono definire ulteriori modi elencando le alterazioni per ogni
grado della scala quando il modo inizia col Do.

@lilypond[verbatim,quote]
freygish = #`((0 . ,NATURAL) (1 . ,FLAT) (2 . ,NATURAL)
    (3 . ,NATURAL) (4 . ,NATURAL) (5 . ,FLAT) (6 . ,FLAT))

\relative {
  \key c \freygish c'4 des e f
  \bar "||" \key d \freygish d es fis g
}
@end lilypond

Le alterazioni dell'armatura di chiave possono essere collocate in
posizioni diverse da quelle tradizionali o anche in più di un'ottava, usando
le proprietà @code{flat-positions} e @code{sharp-positions}
di @code{KeySignature}.  I valori di queste proprietà specificano
l'estensione delle posizioni del rigo in cui potranno comparire
le alterazioni.  Se viene specificata una sola posizione, le
alterazioni vengono collocate entro l'ottava che finisce in quella
posizione del rigo.

@lilypond[verbatim, quote,fragment]
\override Staff.KeySignature.flat-positions = #'((-5 . 5))
\override Staff.KeyCancellation.flat-positions = #'((-5 . 5))
\clef bass \key es \major es g bes d'
\clef treble \bar "||" \key es \major es' g' bes' d''

\override Staff.KeySignature.sharp-positions = #'(2)
\bar "||" \key b \major b' fis' b'2
@end lilypond



@snippets

@cindex armatura di chiave, impedire i segni di bequadro
@cindex bequadro, impedirne l'inserimento nelle armature di chiave
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/preventing-natural-signs-from-being-printed-when-the-key-signature-changes.ly}

@cindex armatura di chiave, non tradizionale
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/non-traditional-key-signatures.ly}

@morerefs
Glossario musicale:
@rglos{church mode},
@rglos{scordatura}.

Manuale di apprendimento:
@rlearningnamed{Pitches and key signatures, Altezze e armature di chiave}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{KeyChangeEvent},
@rinternals{Key_engraver},
@rinternals{Key_performer},
@rinternals{KeyCancellation},
@rinternals{KeySignature},
@rinternals{key-signature-interface}.
@endmorerefs


@node Ottava brackets
@unnumberedsubsubsec Segni di ottavazione

@cindex ottava
@cindex 15ma
@cindex 15mb
@cindex 8va
@cindex 8vb
@cindex ottavazione

@funindex \ottava

I @notation{segni di ottavazione} introducono un'ulteriore trasposizione di
ottava nel rigo:

@lilypond[verbatim,quote]
\relative c'' {
  a2 b
  \ottava #-2
  a2 b
  \ottava #-1
  a2 b
  \ottava #0
  a2 b
  \ottava #1
  a2 b
  \ottava #2
  a2 b
}
@end lilypond

@funindex ottavationMarkups
@funindex ottavation-ordinals
@funindex ottavation-simple-ordinals
@funindex ottavation-numbers

Per impostazione predefinita, viene stampato solo un numero all'inizio della
parentesi.  Questa impostazione può essere cambiata in modo che includa un
numero ordinale abbreviato, come apice o come lettere normali (le ultime
venivano un tempo usate come predefinite); si può cambiare anche il peso
del font grassetto predefinito, come è spiegato in
@ref{Selecting font and font size}.

L'esempio seguente mostra varie opzioni, e anche come ritornare al
comportamento predefinito corrente:

@lilypond[verbatim,quote]
\relative c'' {
  \ottava #1
  a'2 b
  \ottava #2
  a'2 b
  \bar "||"
  \set Staff.ottavationMarkups = #ottavation-ordinals
  \ottava #1
  a,2 b
  \ottava #2
  a'2 b
  \bar "||"
  \override Staff.OttavaBracket.font-series = #'normal
  \set Staff.ottavationMarkups = #ottavation-simple-ordinals
  \ottava #1
  a,2 b
  \ottava #2
  a'2 b
  \bar "||"
  \revert Staff.OttavaBracket.font-series
  \set Staff.ottavationMarkups = #ottavation-numbers
  \ottava #1
  a,2 b
  \ottava #2
  a'2 b
}
@end lilypond


@snippets

@funindex ottavation
@cindex testo dell'ottava
@cindex ottava, testo
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/changing-ottava-text.ly}

@cindex ottava, per una sola voce
@cindex voce, con ottavazione
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/adding-an-ottava-marking-to-a-single-voice.ly}

@cindex inclinazione, estensore dell'ottava, modifica
@cindex ottava, estensore, modifica dell'inclinazione
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/modifying-the-ottava-spanner-slope.ly}

@morerefs
Glossario musicale:
@rglosnamed{octavation,ottavazione}.

Guida alla notazione:
@ref{Selecting font and font size}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Ottava_spanner_engraver},
@rinternals{OttavaBracket},
@rinternals{ottava-bracket-interface}.
@endmorerefs


@node Instrument transpositions
@unnumberedsubsubsec Trasporto strumentale

@cindex trasposizione, MIDI
@cindex trasposizione, strumento
@cindex strumento traspositore
@cindex MIDI
@cindex MIDI, trasposizione

@funindex \transposition

Quando si scrivono partiture che comprendono strumenti traspositori, alcune
parti possono essere scritte a un'altezza diversa dall'@notation{intonazione reale}.
In questi casi, è necessario specificare la chiave dello @notation{strumento traspositore},
altrimenti l'output MIDI e le citazioni in altre parti produrranno
altezze errate.  Per maggiori informazioni sulle citazioni, si veda
@ref{Quoting other voices}.

@example
\transposition @var{altezza}
@end example

L'altezza da usare per @code{\transposition} deve corrispondere al suono
effettivamente prodotto quando un@tie{}@code{c'} scritto sul rigo viene
suonato dallo strumento traspositore.  Tale altezza viene inserita in
modalità assoluta; dunque, uno strumento che produce un suono reale un
tono sopra la notazione deve usare @w{@code{\transposition d'}}.
@code{\transposition} va usato @emph{soltanto} se le altezze @emph{non}
sono scritte in intonazione reale.

Ecco un frammento per violino e clarinetto in Si bemolle, le cui
parti sono inserite usando le note e l'armatura di chiave che appaiono
nei rispettivi righi sulla partitura del direttore.  I due strumenti suonano
all'unisono.

@lilypond[verbatim,quote]
\new GrandStaff <<
  \new Staff = "violin" \with {
      instrumentName = "Vln"
      midiInstrument = "violin"
  }
  \relative c'' {
    % non strettamente necessario, ma meglio ricordarlo
    \transposition c'
    \key c \major
    g4( c8) r c r c4
  }
  \new Staff = "clarinet" \with {
    instrumentName = \markup { Cl (B\flat) }
    midiInstrument = "clarinet"
  }
  \relative c'' {    
    \transposition bes
    \key d \major
    a4( d8) r d r d4
  }
>>
@end lilypond

@code{\transposition} può essere modificato nel corso di un brano.  Ad
esempio, un clarinettista potrebbe essere costretto a passare da un
clarinetto in La a uno in Si bemolle.

@lilypond[verbatim,quote]
flute = \relative c'' {
  \key f \major
  \cueDuring "clarinet" #DOWN {
    R1 _\markup\tiny "clarinet"
    c4 f e d
    R1 _\markup\tiny "clarinet"
  }
}
clarinet = \relative c'' {
  \key aes \major
  \transposition a
  aes4 bes c des
  R1^\markup { muta in B\flat }
  \key g \major
  \transposition bes
  d2 g,
}
\addQuote "clarinet" \clarinet
<<
  \new Staff \with { instrumentName = "Flute" }
    \flute
  \new Staff \with { instrumentName = "Cl (A)" }
    \clarinet
>>
@end lilypond

@morerefs
Glossario musicale:
@rglosnamed{concert pitch,intonazione reale},
@rglosnamed{transposing instrument,strumento traspositore}.

Guida alla notazione:
@ref{Quoting other voices},
@ref{Transpose}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.
@endmorerefs


@node Automatic accidentals
@unnumberedsubsubsec Alterazioni automatiche

@cindex stile di alterazione
@cindex stile di alterazione predefinito
@cindex alterazione
@cindex alterazione automatica

@funindex \accidentalStyle
@funindex voice
@funindex default

Esistono diverse convenzioni sul modo di scrivere le
alterazioni.  LilyPond ha una funzione per specificare
lo stile di gestione delle alterazioni adottato.  Questa funzione viene
richiamata nel modo seguente:

@example
\new Staff <<
  \accidentalStyle voice
  @{ @dots{} @}
>>
@end example

La gestione delle alterazioni si applica di norma all'attuale @code{Staff} (con
l'eccezione degli stili @code{choral} @code{piano} e @code{piano-cautionary}, che sono
spiegati dopo).  Questa funzione accetta un secondo argomento opzionale che
determina in quale ambito debba essere cambiato lo stile.  Ad esempio, per
usare lo stesso stile in tutti i righi dell'attuale @code{StaffGroup}, si usa:

@example
\accidentalStyle StaffGroup.voice
@end example

Sono supportati i seguenti modi di gestire le alterazioni.  Il seguente esempio
mostra tutti gli stili:


@lilypond[verbatim,quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle default
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle default
      \musicB
    }
  >>
}
@end lilypond

Si noti che le ultime linee di questo esempio possono essere sostituite dal
seguente frammento, se si vuole usare lo stesso stile in entrambi i righi.

@example
\new PianoStaff @{
  <<
    \new Staff = "up" @{
      %%% change the next line as desired:
      \accidentalStyle Score.default
      \musicA
    @}
    \new Staff = "down" @{
      \musicB
    @}
  >>
@}
@end example


@c don't use verbatim in this table.
@c See regression test accidental-styles.ly.
@table @code
@item default

@cindex stile delle alterazioni @emph{default}

@funindex default

Questo è il comportamento predefinito del compositore tipografico.  Corrisponde
alla pratica comunemente impiegata dal diciottesimo secolo: le alterazioni
vengono ricordate fino alla fine della misura in cui si trovano, limitatamente
all'ottava di appartenenza.  Quindi, nell'esempio seguente non compare alcun
segno di bequadro prima del@tie{}@code{b} nella seconda misura o prima
dell'ultimo@tie{}@code{c}:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle default
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle default
      \musicB
    }
  >>
}
@end lilypond

@item voice

@cindex stile delle alterazioni @emph{voice}
@cindex stile delle alterazioni @emph{modern}
@cindex stile delle alterazioni @emph{modern-cautionary}
@cindex @emph{voice}, stile delle alterazioni
@cindex @emph{modern}, stile delle alterazioni
@cindex @emph{modern-cautionary}, stile delle alterazioni

@funindex voice

Normalmente le alterazioni mantengono la propria validità a livello di
@code{Staff}.  Tuttavia in questo stile le alterazioni
vengono gestite individualmente per ogni voce.  Al di fuori di quest'aspetto,
lo stile è analogo a @code{default}.

Di conseguenza, le alterazioni relative a una voce non vengono cancellate nelle
altre voci. Un risultato spesso non desiderabile: nell'esempio seguente è
difficile capire se il secondo@tie{}@code{a} sia naturale o diesis.  L'opzione
@code{voice} deve essere quindi usata solo se ogni voce è destinata a un
esecutore diverso.  Se la partitura deve essere letta da un unico musicista
(come nel caso della partitura del direttore, o di uno spartito per pianoforte),
allora è preferibile usare @code{modern} o @code{modern-cautionary}.


@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle voice
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle voice
      \musicB
    }
  >>
}
@end lilypond

@item modern

@cindex alterazione, stile moderno
@cindex stile moderno dell'alterazione

@funindex modern

Questa regola corrisponde alla pratica comune del ventesimo
secolo.  Omette i segni di bequadro supplementari che in passato
erano di norma anteposti al diesis che segue un doppio
diesis o a un bemolle che segue un doppio bemolle.  La regola
@code{modern} presenta le stesse alterazioni di @code{default}, con
due aggiunte che servono a evitare ambiguità: i segni di annullamento
delle alterazioni temporanee sono anteposti alle note sulla stessa
ottava della misura successiva e alle note in ottave diverse nella
stessa misura.  In questo esempio, dunque, i bequadri del@tie{}@code{b}
e del@tie{}@code{c} nella seconda misura del rigo superiore:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle modern
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle modern
      \musicB
    }
  >>
}
@end lilypond

@item modern-cautionary

@cindex alterazione, stile @emph{modern-cautionary}
@cindex @emph{modern-cautionary}, stile delle alterazioni

@funindex modern-cautionary

Questa regola è simile a @code{modern}, ma le alterazioni @q{supplementari}
sono segnate come alterazioni di precauzione (con parentesi).  La loro
dimensione può essere cambiata attraverso la proprietà
@code{font-size} di @code{AccidentalCautionary}.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle modern-cautionary
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle modern-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item modern-voice

@cindex @emph{modern}, stile delle alterazioni
@cindex stile delle alterazioni @emph{modern}
@cindex alterazione su più voci
@cindex alterazione moderna

@funindex modern-voice

Questa regola viene usata per le alterazioni su più voci destinate sia agli
esecutori che suonano una singola voce sia a quelli che suonano tutte
le voci.  Le alterazioni sono mostrate su tutte le voci, ma @emph{sono annullate}
su ogni voce dello stesso rigo (@code{Staff}).  Quindi, l'alterazione
dell'@tie{}@code{a} nell'ultima misura viene annullata perché l'annullamento
precedente si trovava in una voce diversa, mentre quella del@tie{}@code{d}
nel rigo inferiore viene annullata a causa dell'alterazione in un'altra
voce della misura precedente:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle modern-voice
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle modern-voice
      \musicB
    }
  >>
}
@end lilypond

@cindex stile delle alterazioni, @emph{modern-voice-cautionary}
@cindex @emph{modern-voice-cautionary}, stile delle alterazioni

@funindex modern-voice-cautionary

@item modern-voice-cautionary

Questa regola è analoga a @code{modern-voice}, ma con le alterazioni
supplementari (quelle non mostrate da @code{voice}) segnate come
alterazioni di precauzione.  Tutte le alterazioni mostrate
da @code{default} @emph{sono} mostrate con questa regola, ma alcune di
esse sono indicate come alterazioni di precauzione.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle modern-voice-cautionary
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle modern-voice-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item piano

@cindex stile delle alterazioni, @emph{piano}
@cindex @emph{piano}, stile delle alterazioni

@funindex piano

Questa regola riflette la pratica del ventesimo secolo per la notazione per
pianoforte.  Il suo comportamento è molto simile allo stile @code{modern}, ma
in questo caso le alterazioni vengono annullate in tutti i righi che
si trovano nello stesso @code{GrandStaff} o @code{PianoStaff}, dunque tutte
gli annullamenti delle note finali.

È lo stile che si applica agli attuali @code{GrandStaff} e @code{PianoStaff}
a meno che non sia qualificato con un secondo argomento.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle piano
      \musicA
    }
    \new Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond

@item piano-cautionary

@cindex @emph{piano-cautionary}, stile delle alterazioni
@cindex stile delle alterazioni, @emph{piano-cautionary}

@funindex piano-cautionary

È uguale a @code{piano} ma con le alterazioni supplementari
mostrate come alterazioni di precauzione.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle piano-cautionary
      \musicA
    }
    \new Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond


@item choral

@cindex stile delle alterazioni, choral
@cindex choral, stile delle alterazioni

@funindex choral

Questa regola è una combinazione degli stili @code{modern-voice} e @code{piano}.
Mostra tutte le alterazioni richieste dai cantanti che seguono solo la propria
voce, e mostra anche le ulteriori alterazioni per tutti i lettori che seguono
tutte le voci di un intero @code{ChoirStaff} contemporaneamente.

Questo stile di alterazioni si applica al @code{ChoirStaff} corrente a meno che
non sia qualificato con un secondo argomento.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new ChoirStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle choral
      \musicA
    }
    \new Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond


@item choral-cautionary

@cindex choral-cautionary, stile delle alterazioni
@cindex stile delle alterazioni, choral-cautionary

@funindex choral-cautionary

Questo stile è identico a @code{choral} ma con le alterazioni extra
in forma di alterazioni di cortesia.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new ChoirStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle choral-cautionary
      \musicA
    }
    \new Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond


@item neo-modern

@cindex stile delle alterazioni @emph{neo-modern}
@cindex @emph{neo-modern}, stile delle alterazioni

@funindex neo-modern

Questa regola si riferisce a una pratica tipica della musica contemporanea:
le alterazioni sono mostrate come in @code{modern}, ma vengono ripetute se
la stessa nota appare in seguito nella stessa misura -- a meno che la
seconda occorrenza non segua direttamente la prima.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle neo-modern
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle neo-modern
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern-cautionary

@cindex stile delle alterazioni @emph{neo-modern-cautionary}
@cindex @emph{neo-modern-cautionary}, stile delle alterazioni

@funindex neo-modern-cautionary

Questa regola è simile a @code{neo-modern}, ma le alterazioni
@q{supplementari} sono mostrate come alterazioni di precauzione (con
parentesi). La loro dimensione può essere modificata attraverso
la proprietà @code{font-size} di @code{AccidentalCautionary}.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle neo-modern-cautionary
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle neo-modern-cautionary
      \musicB
    }
  >>
}
@end lilypond


@item neo-modern-voice

@cindex stile delle alterazioni, @emph{neo-modern-voice}
@cindex @emph{neo-modern-voice}, stile delle alterazioni

@funindex neo-modern-voice

Questa regola viene usata per le alterazioni su più di una voce che devono
essere lette sia da musicisti che suonano una singola voce sia da musicisti che
suonano tutte le voci. Le alterazioni per ogni voce sono mostrate come
nello stile @code{neo-modern}, ma vengono annullate attraverso le
voci nello stesso rigo (@code{Staff}).

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle neo-modern-voice
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle neo-modern-voice
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern-voice-cautionary

@cindex stile  delle alterazioni, @emph{neo-modern-voice-cautionary}
@cindex @emph{neo-modern-voice-cautionary}, stile delle alterazioni

@funindex neo-modern-voice-cautionary

Questa regola è simile a @code{neo-modern-voice}, ma le alterazioni
supplementari sono indicate come alterazioni di precauzione.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle neo-modern-voice-cautionary
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle neo-modern-voice-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item dodecaphonic

@cindex stile delle alterazioni, @emph{dodecaphonic}
@cindex @emph{dodecaphonic}, stile delle alterazioni

@funindex dodecaphonic

Questa regola riflette una regola introdotta dai compositori
all'inizio del ventesimo secolo nel tentativo di abolire la
gerarchia tra suoni naturali e non naturali.  Con questo
stile, @emph{ogni} nota presenta un segno di alterazione, anche i suoni
naturali.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle dodecaphonic
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle dodecaphonic
      \musicB
    }
  >>
}
@end lilypond

@item dodecaphonic-no-repeat

@cindex stile delle alterazioni, dodecaphonic-no-repeat
@cindex dodecaphonic-no-repeat, stile delle alterazioni

@funindex dodecaphonic-no-repeat

Come nello stile delle alterazioni dodecafonico @emph{ogni} nota ha
un segno di alterazione, ma le alterazioni sono soppresse per tutte
le altezze ripetute immediatamente nello stesso rigo.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle dodecaphonic-no-repeat
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle dodecaphonic-no-repeat
      \musicB
    }
  >>
}
@end lilypond


@item dodecaphonic-first

@cindex stile delle alterazioni, dodecaphonic-first
@cindex dodecaphonic-first, stile delle alterazioni

@funindex dodecaphonic-first

In modo analogo allo stile delle alterazioni dodecafonico @emph{ogni}
altezza ha un segno di alterazione, ma solo la prima volta che si
incontra in una misura.  Le alterazioni vengono ricordate solo per
l'ottava corrente ma in tutte le voci.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle dodecaphonic-first
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle dodecaphonic-first
      \musicB
    }
  >>
}
@end lilypond

@item teaching

@cindex stile delle alterazioni per insegnamento (@emph{teaching})
@cindex insegnamento (@emph{teaching}), stile delle alterazioni
@cindex @emph{teaching}, stile delle alterazioni
@funindex teaching

Questa regola è pensata per gli studenti: permette di generare facilmente degli
spartiti di scale con le alterazioni di precauzione inserite in modo automatico.
Alle alterazioni, indicate come nello stile @code{modern}, vengono
aggiunte ulteriori segni di precauzione per tutti i diesis e bemolle
specificati dall'armatura di chiave, fuorché nel caso di ripetizioni
immediatamente successive di una stessa nota.

@lilypond[quote,staffsize=18]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \key fis \minor
      \accidentalStyle teaching
      \musicA
    }
    \new Staff = "down" {
      \key fis \minor
      \accidentalStyle teaching
      \musicB
    }
  >>
}
@end lilypond



@item no-reset

@cindex stile delle alterazioni, @code{no-reset}
@cindex @code{no-reset}, stile delle alterazioni

@funindex no-reset

È identico a @code{default}, ma le alterazioni mantengono la propria validità
@q{per sempre}, non solo all'interno della singola misura:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle no-reset
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle no-reset
      \musicB
    }
  >>
}
@end lilypond

@item forget

@cindex stile delle alterazioni, @code{forget}
@cindex @code{forget}, stile delle alterazioni

@funindex forget

È il contrario di @code{no-reset}: le alterazioni non vengono
ricordate affatto -- pertanto, tutte le alterazioni si
riferiscono all'armatura di chiave, indipendentemente dal
materiale musicale precedente.

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \new Staff = "up" {
      \accidentalStyle forget
      \musicA
    }
    \new Staff = "down" {
      \accidentalStyle forget
      \musicB
    }
  >>
}
@end lilypond
@end table

@morerefs
Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Accidental},
@rinternals{Accidental_engraver},
@rinternals{GrandStaff},
@rinternals{PianoStaff},
@rinternals{Staff},
@rinternals{AccidentalSuggestion},
@rinternals{AccidentalPlacement},
@rinternals{accidental-suggestion-interface}.
@endmorerefs

@cindex alterazione, e note simultanee
@cindex note simultanee e alterazioni
@cindex alterazione, negli accordi
@cindex accordo, alterazioni in

@knownissues
Le note simultanee non vengono considerate nell'individuazione
automatica delle alterazioni; vengono prese come riferimento solo
le note precedenti e l'armatura di chiave.  Se la stessa nota
occorre simultaneamente con alterazioni diverse, può essere necessario
forzare le alterazioni con@tie{}@code{!} o@tie{}@code{?}: @samp{<f! fis!>}.

Nei finali alternativi, l'annullamento di precauzione dovrebbe basarsi
sulla precedente misura @emph{eseguita}, ma si basa sulla precedente
misura @emph{stampata}.  Nell'esempio seguente il Do naturale della seconda
volta non richiede il segno di bequadro:

@lilypond[quote]
{
  \accidentalStyle modern
  \time 2/4
  \repeat volta 2 {
    c'2
  }
  \alternative {
     \volta 1 { cis' }
     \volta 2 { c' }
  }
}
@end lilypond

Si può usare il seguente espediente: si definisce una funzione che
imposti localmente lo stile delle alterazioni su @code{forget}:

@lilypond[verbatim,quote]
forget = #(define-music-function (music) (ly:music?) #{
  \accidentalStyle forget
  #music
  \accidentalStyle modern
#})
{
  \accidentalStyle modern
  \time 2/4
  \repeat volta 2 {
    c'2
  }
  \alternative {
     \volta 1 { cis' }
     \volta 2 { \forget c' }
  }
}
@end lilypond


@node Alternate accidental glyphs
@unnumberedsubsubsec Glifi di alterazione alternativi

@cindex alterazioni, glifi alternativi
@cindex glifi di alterazione alternativi

I sistemi di notazione non occidentali e antici hanno le loro alterazioni.
I glifi sono regolati dalla proprietà @code{alterationGlyphs} del
contesto @code{Staff} e da tipi di contesto simili.
I valori predefiniti di questa proprietà sono elencati in
@ref{Accidental glyph sets}.

@lilypond[verbatim,quote]
\layout {
  \context {
    \Staff
    alterationGlyphs = #alteration-vaticana-glyph-name-alist
  }
}

{ ces' c' cis' }
@end lilypond

La proprietà può essere impostata anche su una lista associativa
personalizzata che associa le alterazioni ai nomi dei glifi.
Le alterazioni si specificano come frazioni in toni.
I glifi sono elencati in @ref{Accidental glyphs}.

@lilypond[verbatim,quote]
\layout {
  \context {
    \Staff
    alterationGlyphs =
      #'((-1/2 . "accidentals.flat.arrowdown")
         (0 . "accidentals.natural.arrowup")
         (1/2 . "accidentals.sharp.arrowup"))
  }
}

{ ces' c' cis' }
@end lilypond

La proprietà @code{padding-pairs} degli oggetti @code{KeySignature} e
@code{KeyCancellation} è una lista associativa che mappa coppie di
glifi al padding che deve essere aggiunto tra questi glifi nelle
armature di chiave.

@lilypond[verbatim]
\layout {
  \context {
    \Staff
    alterationGlyphs =
      #'((-1/2 . "accidentals.flat.arrowdown")
         (0 . "accidentals.natural.arrowup")
         (1/2 . "accidentals.sharp.arrowup"))
    \override KeySignature.padding-pairs =
      #'((("accidentals.sharp.arrowup" . "accidentals.sharp.arrowup")
            . 0.25)
         (("accidentals.flat.arrowdown" . "accidentals.flat.arrowdown")
            . 0.3))
    \override KeyCancellation.padding-pairs =
      #'((("accidentals.natural.arrowup" . "accidentals.natural.arrowup")
            . 0.7))
  }
}

{
  \key cis \major
  ces' c'
  \key ces \major
  cis'
}
@end lilypond

@morerefs
Guida alla notazione:
@ref{Accidental glyph sets},
@ref{Accidental glyphs}.

Guida al funzionamento interno:
@rinternals{accidental-switch-interface},
@rinternals{Alteration_glyph_engraver},
@rinternals{key-signature-interface}.
@endmorerefs


@node Ambitus
@unnumberedsubsubsec Ambitus

@cindex ambitus
@cindex ambito delle altezze
@cindex estensione

Il termine @notation{ambitus} (pl.@: ambitus) indica l'ambito di
altezze di una determinata voce all'interno di una composizione
musicale.  Può indicare anche l'estensione di uno strumento
musicale, ovvero l'intera gamma di suoni che può produrre.
L'ambitus viene usato nelle parti vocali in modo che gli esecutori
possano capire facilmente se siano adeguate alle loro possibilità.

L'ambitus viene indicato all'inizio del brano, prima della
chiave iniziale.  L'intervallo è individuato graficamente da due
teste di nota che rappresentano l'altezza più bassa e più alta.
Le alterazioni sono mostrate solo se non fanno parte dell'armatura
di chiave.

@lilypond[verbatim,quote]
\layout {
  \context {
    \Voice
    \consists Ambitus_engraver
  }
}

\relative {
  aes' c e2
  cis,1
}
@end lilypond


@snippets

@cindex ambitus, per voce
@cindex voce, ambitus
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/adding-ambitus-per-voice.ly}

@cindex ambitus, su più voci
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/ambitus-with-multiple-voices.ly}

@cindex ambitus, distanza rispetto alla linea
@funindex AmbitusLine
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/changing-the-ambitus-gap.ly}

@cindex ambitus, posizionamento
@funindex ambitusAfter
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/ambitus-after-key-signature.ly}

@morerefs
Glossario musicale:
@rglos{ambitus}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Ambitus_engraver},
@rinternals{Voice},
@rinternals{Staff},
@rinternals{Ambitus},
@rinternals{AmbitusAccidental},
@rinternals{AmbitusLine},
@rinternals{AmbitusNoteHead},
@rinternals{ambitus-interface}.
@endmorerefs

@knownissues
Le collisioni non vengono gestite in presenza di un ambitus multiplo su
più di una voce.


@node Note heads
@subsection Teste di nota

Questa sezione suggerisce i modi in cui modificare la testa di una nota.

@menu
* Special note heads::
* Easy notation note heads::
* Shape note heads::
* Improvisation::
@end menu

@node Special note heads
@unnumberedsubsubsec Teste di nota speciali

@cindex testa di nota, speciale
@cindex testa di nota, barrata
@cindex testa di nota, romboidale
@cindex testa di nota, parlato
@cindex testa di nota, armonico
@cindex testa di nota, chitarra
@cindex barrata, testa di nota
@cindex diamante, testa di nota
@cindex parlato, testa di nota
@cindex armonico, testa di nota
@cindex chitarra, testa di nota
@cindex testa di nota, stili
@cindex stile, teste di nota

@funindex cross

L'aspetto delle teste delle note può essere modificato:

@lilypond[verbatim,quote]
\relative c'' {
  c4 b
  \override NoteHead.style = #'cross
  c4 b
  \revert NoteHead.style
  a b
  \override NoteHead.style = #'harmonic
  a b
  \revert NoteHead.style
  c4 d e f
}
@end lilypond

L'elenco di tutti gli stili per le teste di nota è in @ref{Note head styles}.

@funindex \xNote
@funindex \xNotesOn
@funindex \xNotesOff

Lo stile barrato (@code{cross}) viene usato per rappresentare varie
intenzioni musicali.  I seguenti comandi generici predefiniti modificano
la testa della nota nei contesti del rigo e dell'intavolatura e possono
essere usati per rappresentare qualsiasi significato musicale:

@lilypond[verbatim,quote]
\relative {
  c''4 b
  \xNotesOn
   a b c4 b
  \xNotesOff
  c4 d
}
@end lilypond

Questo comando può essere usato all'interno e all'esterno degli accordi per
generare teste barrate sia nel contesto del rigo che in
quello dell'intavolatura:

@lilypond[verbatim,quote]
\relative {
  c''4 b
  \xNote { e f }
  c b < g \xNote c f > b
}
@end lilypond

@funindex \deadNote
@funindex \deadNotesOn
@funindex \deadNotesOff

Potete utilizzare, al posto di @code{\xNote}, @code{\xNotesOn} e
@code{\xNotesOff}, i comandi @code{\deadNote}, @code{\deadNotesOn} e
@code{\deadNotesOff}.  Il termine @notation{dead note} è di uso comune
tra i chitarristi.

@funindex \harmonic

Esiste anche una scorciatoia simile per le forme a diamante:

@lilypond[verbatim,quote]
\relative c'' {
  <c f\harmonic>2 <d a'\harmonic>4 <c g'\harmonic> f\harmonic
}
@end lilypond

@predefined
@code{\harmonic},
@code{\xNotesOn},
@code{\xNotesOff},
@code{\xNote}.
@endpredefined

@morerefs
Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida alla notazione:
@ref{Note head styles},
@ref{Chorded notes},
@ref{Indicating harmonics and dampened notes}.

Guida al funzionamento interno:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{Ledger_line_engraver},
@rinternals{NoteHead},
@rinternals{LedgerLineSpanner},
@rinternals{note-head-interface},
@rinternals{ledger-line-spanner-interface}.
@endmorerefs


@node Easy notation note heads
@unnumberedsubsubsec Testa di nota con nome della nota

@cindex testa di nota, esercizio
@cindex testa di nota, notazione semplificata
@cindex notazione semplificata
@cindex musica per principianti
@cindex principianti, musica
@cindex testa di nota, facile da suonare

@funindex \easyHeadsOn
@funindex \easyHeadsOff

La nota @q{easy play} inserisce il nome della nota dentro la testa.
Viene usata nella musica per principianti.  Per rendere le lettere
leggibili, occorrerebbe usare un carattere più grande.  A questo
proposito si veda @ref{Setting the staff size}.

@lilypond[verbatim,quote]
#(set-global-staff-size 26)
\relative c' {
  \easyHeadsOn
  c2 e4 f
  g1
  \easyHeadsOff
  c,1
}
@end lilypond


@predefined
@code{\easyHeadsOn},
@code{\easyHeadsOff}.
@endpredefined


@snippets

@cindex notazione semplificata, usando numeri
@cindex numero, in notazione semplificata
@funindex Ez_numbers_engraver
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/numbers-as-easy-note-heads.ly}

@morerefs
Guida alla notazione:
@ref{Setting the staff size}.

Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{NoteHead},
@rinternals{note-head-interface}.
@endmorerefs


@node Shape note heads
@unnumberedsubsubsec Teste di nota a forma variabile

@cindex note a forma variabile
@cindex testa di nota, forma
@cindex testa di nota, Aiken
@cindex Aiken, testa di nota
@cindex testa di nota, Sacred Harp
@cindex Sacred Harp, testa di nota
@cindex testa di nota, Southern Harmony
@cindex Southern Harmony, testa di nota
@cindex Funk, testa di nota
@cindex testa di nota, Funk
@cindex testa di nota, Harmonia Sacra
@cindex Harmonia Sacra, testa di nota
@cindex Christian Harmony, testa di nota
@cindex testa di nota, Christian Harmony
@cindex Walker, testa di nota
@cindex testa di nota, Walker

@funindex \aikenHeads
@funindex \aikenThinHeads
@funindex \sacredHarpHeads
@funindex \southernHarmonyHeads
@funindex \funkHeads
@funindex \walkerHeads

In alcune notazioni, la forma della testa della nota corrisponde
alla funzione armonica di una nota nella scala.  Questa notazione
era comune nei canzonieri americani del diciannovesimo secolo.
Gli stili possibili sono Sacred Harp, Southern Harmony,
Funk (Harmonia Sacra), Walker e Aiken (Christian Harmony):

@lilypond[verbatim,quote]
\relative c'' {
  \aikenHeads
  c, d e f g2 a b1 c \break
  \aikenThinHeads
  c,4 d e f g2 a b1 c \break
  \sacredHarpHeads
  c,4 d e f g2 a b1 c \break
  \southernHarmonyHeads
  c,4 d e f g2 a b1 c \break
  \funkHeads
  c,4 d e f g2 a b1 c \break
  \walkerHeads
  c,4 d e f g2 a b1 c \break
}
@end lilypond

@funindex \key
@funindex \aikenHeadsMinor
@funindex \aikenThinHeadsMinor
@funindex \sacredHarpHeadsMinor
@funindex \southernHarmonyHeadsMinor
@funindex \funkHeadsMinor
@funindex \walkerHeadsMinor

Le forme variano in base al grado della scala; la
scala è determinata dal comando @code{\key}.  Se si scrive in
tonalità minore, il grado della scala può essere determinato
in base alla relativa maggiore:

@lilypond[verbatim,quote]
\relative c'' {
  \key a \minor
  \aikenHeads
  a b c d e2 f g1 a \break
  \aikenHeadsMinor
  a,4 b c d e2 f g1 a \break
  \aikenThinHeadsMinor
  a,4 b c d e2 f g1 a \break
  \sacredHarpHeadsMinor
  a,2 b c d \break
  \southernHarmonyHeadsMinor
  a2 b c d \break
  \funkHeadsMinor
  a2 b c d \break
  \walkerHeadsMinor
  a2 b c d \break
}
@end lilypond


@predefined
@code{\aikenHeads},
@code{\aikenHeadsMinor},
@code{\aikenThinHeads},
@code{\aikenThinHeadsMinor},
@code{\funkHeads},
@code{\funkHeadsMinor},
@code{\sacredHarpHeads},
@code{\sacredHarpHeadsMinor},
@code{\southernHarmonyHeads},
@code{\southernHarmonyHeadsMinor},
@code{\walkerHeads},
@code{\walkerHeadsMinor}.
@endpredefined


@snippets

@cindex note head, Aiken, thin variant
@cindex Aiken shape note head, thin variant
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/aiken-head-thin-variant-noteheads.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/applying-note-head-styles-depending-on-the-step-of-the-scale.ly}

La lista completa di tutti gli stili delle teste si trova in @ref{Note head styles}.

@morerefs
Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida alla notazione:
@ref{Note head styles}.

Guida al funzionamento interno:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{NoteHead},
@rinternals{note-head-interface}.
@endmorerefs


@node Improvisation
@unnumberedsubsubsec Improvvisazione

@cindex improvvisazione
@cindex testa di nota, tagliata
@cindex testa di nota, improvvisazione
@cindex tagliata, testa di nota

@funindex \improvisationOn
@funindex \improvisationOff

L'improvvisazione viene talvolta indicata con teste tagliate:
l'esecutore può scegliere qualsiasi nota ma deve seguire il ritmo
indicato.  Si possono creare queste teste:

@lilypond[verbatim,quote]
\new Voice \with {
  \consists Pitch_squash_engraver
} \relative {
  e''8 e g a a16( bes) a8 g
  \improvisationOn
  e8 ~
  2 ~ 8 f4 f8 ~
  2
  \improvisationOff
  a16( bes) a8 g e
}
@end lilypond

@predefined
@code{\improvisationOn},
@code{\improvisationOff}.
@endpredefined

@morerefs
Frammenti di codice:
@rlsrnamed{Pitches, Altezze}.

Guida al funzionamento interno:
@rinternals{Pitch_squash_engraver},
@rinternals{Voice},
@rinternals{RhythmicStaff}.
@endmorerefs
