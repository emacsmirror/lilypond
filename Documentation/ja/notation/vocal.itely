@c -*- coding: utf-8; mode: texinfo; documentlanguage: ja -*-

@ignore
    Translation of GIT committish: f11513f36c131dab18338d6a3a729e24a927150d

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  For details, see the Contributors'
    Guide, node Updating translation committishes..
@end ignore

@c \version "2.25.3"

@c Translators: Tomohiro Tatejima, Yoshiki Sawada, Hiroshi Fukuhara
@c Translation status: post-GDP

@node Vocal music
@section 声楽

@lilypondfile[quote]{snippets/vocal-headword.ly}

このセクションでは声楽を譜刻し、歌詞を旋律の音符に揃える方法について説明します。


@node Common notation for vocal music
@subsection 声楽で共通の記譜法

このセクションでは声楽の譜刻に共通する問題について説明します。


@node References for vocal music
@unnumberedsubsubsec 声楽のためのリファレンス

このセクションでは声楽を譜刻する際に発生する記譜法の問題についての@c
詳細について記述している場所を示します。

@itemize

@item
たいていの声楽では歌詞として記述されたテキストを用います。@c
この記譜法についての導入部は @rlearning{Setting simple songs} にあります。

@item
声楽はたいてい歌詞や他のテキスト要素 (配役の名前等) のために@c
@code{markup} モードの使用を必要とします。@c
@code{markup} モードの構文は @ref{Text markup introduction} で@c
説明しています。

@item
声楽譜の最初に @notation{音域} (ambitus) が追加されることがあります。@c
音域について @ref{Ambitus} で説明しています。

@item
デフォルトでは強弱記号は譜の下に配置されます。@c
しかしながら、たいていの合唱の楽譜では、@c
@ref{Score layouts for choral} で説明しているように、@c
強弱記号は歌詞を避けるために譜の上に配置されます。

@end itemize

@morerefs
音楽用語集:
@rglos{ambitus}

学習マニュアル:
@rlearning{Setting simple songs}

記譜法リファレンス:
@ref{Text markup introduction},
@ref{Ambitus},
@ref{Score layouts for choral}

コード断片集:
@rlsr{Vocal music}


@node Entering lyrics
@unnumberedsubsubsec 歌詞を入力する

@cindex lyrics, entering (歌詞を入力する)
@cindex entering lyrics (歌詞を入力する)
@cindex formatting, in lyrics (歌詞のフォーマット)
@cindex lyrics, formatting (歌詞のフォーマット)
@cindex punctuation, in lyrics (歌詞の句読点)
@cindex lyrics, punctuation (歌詞の句読点)
@cindex space, in lyrics (歌詞のスペース)
@cindex quote, in lyrics (歌詞のスペース)
@funindex \lyricmode

@c TODO should we explain hyphens here

歌詞は @code{\lyricmode} で始めるか
@code{\addlyrics} または @code{\lyricsto} を用いる@c
特殊な入力モードで入力されます。@c
この特殊な入力モードでは、入力 @code{d} はピッチ @notation{D} とは解釈されず、@c
テキストの 1 文字の歌詞と解釈されます。@c
言い換えると、歌詞を音符のように入力して、@c
ピッチではなくテキストとして譜刻します。

例:

@example
\lyricmode @{ Three4 blind mice,2 three4 blind mice2 @}
@end example

歌詞の水平方向の配置を指定するための手法は主に 2 つあります
-- 上記の例のように歌詞の各音節の演奏時間を指定するか、@c
@code{\addlyrics} または @code{\lyricsto} を用いて@c
歌詞を自動的に旋律や他のボイスに揃えさせるかのどちらかです。@c
前者は @ref{Manual syllable durations} で説明します。@c
後者は @ref{Automatic syllable durations} で説明します。

歌詞の単語または音節はアルファベット
(さらに他のいくつかの文字 -- 以下を読んでください) で始まり、@c
空白か数字で終わります。@c
歌詞の音節の頭文字以後の文字は、数字や空白を除く、@c
任意の文字になります。

数字や空白ではない文字は歌詞の一部と見なされるため、@c
@code{@}} で終わる単語であっても有効です
-- このことが以下のミスを引き起こします:

@example
\lyricmode @{ lah lah lah@}
@end example

上記の例で、@code{@}} は歌詞の最後の音節に含まれるため、@c
波括弧 @code{@{} は閉じられず、@c
入力ファイルはおそらくコンパイルされません。@c
これを避けるため、波括弧の前後に常に空白を記述すべきです:

@example
\lyricmode @{ lah lah lah @}
@end example

句読点、アクセントが付いた文字を持つ歌詞、英語以外の言語の文字、@c
あるいは特殊文字 (ハート記号や引用符等) は、UTF-8 エンコードで保存することで、@c
直接入力することができます。@c
さらなる情報は、@ref{Special characters} を参照してください。

@lilypond[quote,verbatim]
\relative { d''8 c16 a bes8 f ees' d c4 }
\addlyrics { „Schad’ um das schö -- ne grü -- ne Band, }

@end lilypond

歌詞モードで通常の引用符を使うことができますが、@c
引用符の前にバックスラッシュを配置し、@c
歌詞の音節全体を追加の引用符で囲む必要があります。@c
例を挙げます:

@lilypond[quote,verbatim]
\relative { \time 3/4 e'4 e4. e8 d4 e d c2. }
\addlyrics { "\"I" am so lone -- "ly,\"" said she }
@end lilypond

歌詞モードでの単語の開始の完全な定義は複雑です。@c
歌詞モードで、単語は以下の文字で始まります:
アルファベット, @code{_}, @code{?}, @code{!}, @code{:}, @code{'},
制御文字 @code{^A} から @code{^F}, @code{^Q} から @code{^W}, @code{^Y},
@code{^^}, 128 以上の ASCII コードの 8 ビット文字,
バックスラッシュとの組み合わせ @code{\`}, @code{\'}, @code{\"},
または @code{\^}。

@c " to balance double quotes for not-so-bright context-sensitive editors

歌詞の中で @code{\markup} を用いることで、@c
歌詞の体裁を様々に制御することができます。@c
多くのオプションの説明は、@ref{Formatting text} を参照してください。

@snippets

@cindex lyrics, and markup (歌詞とマークアップ)
@cindex markup, in lyrics (歌詞におけるマークアップ)
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/formatting-lyrics-syllables.ly}

@morerefs
学習マニュアル:
@rlearning{Songs}

記譜法リファレンス:
@ref{Automatic syllable durations},
@ref{Fonts},
@ref{Formatting text},
@ref{Input modes},
@ref{Manual syllable durations},
@ref{Special characters}

内部リファレンス:
@rinternals{LyricText}

コード断片集:
@rlsr{Text}


@node Aligning lyrics to a melody
@unnumberedsubsubsec 歌詞を旋律に揃える

@cindex lyrics, aligning to a melody (歌詞を旋律に揃える)
@funindex associatedVoice
@funindex \lyricmode
@funindex \addlyrics
@funindex \lyricsto

歌詞は @code{\lyricmode} 内で解釈され、@code{Lyrics} コンテキスト内で@c
譜刻されます。
@ref{Contexts explained} を参照してください。

@example
\new Lyrics \lyricmode @{ @dots{} @}
@end example

@code{\lyricmode} の異なる形が 2 種類あり、それらは@c
歌詞を音楽に揃えるために、コンテキストを関連付けする機能を持ちます。@c
@code{\addlyrics} はより便利で、@c
Voice コンテキストの音楽のすぐ後に記述することで、@c
自身で暗黙的に Lyrics コンテキストを作成し歌詞が音楽に揃えられます。@c
@code{\lyricsto} はより多機能で、関連付ける Voice コンテキストを名前で指定@c
します。また、Lyrics コンテキストは明示的に作成する必要があります。@c
詳しくは、@ref{Automatic syllable durations} を参照してください。

歌詞は主に 2 つの方法で歌詞に揃えることができます:

@itemize

@item
@code{\addlyric}, @code{\lyricsto} を用いるか、@c
プロパティ @code{associatedVoice} を設定することにより、@c
他のボイスあるいは (特殊な状況ですが) 関連付けされた旋律から@c
歌詞の音節の演奏時間を取ることで、歌詞を自動的に揃えることができます。@c
詳細は @ref{Automatic syllable durations} を参照してください。

@c KEEP LY
@lilypond[quote,ragged-right,verbatim]
<<
  \new Staff <<
    \time 2/4
    \new Voice = "one" \relative {
      \voiceOne
      c''4 b8. a16 g4. r8 a4 ( b ) c2
    }
    \new Voice = "two" \relative {
      \voiceTwo
       s2 s4. f'8 e4 d c2
    }
  >>

% "one" の音符に揃えます
  \new Lyrics \lyricsto "one" {
    Life is __ _ love, live __ life.
  }

% 最初は "one" の音符に揃えて、それから "two" に切り替えます
  \new Lyrics \lyricsto "one" {
    No more let
    \set associatedVoice = "two"  % 切り替える音節の前にセットする必要があります
    sins and sor -- rows grow.
  }
>>
@end lilypond

歌詞の 1 番は通常の歌詞の入力方法を示しています。

歌詞の 2 番は歌詞を揃えるボイスを切り替える方法を示しています。@c
この方法は、歌詞の 1 番と 2 番で音符への単語の揃え方が異なり、@c
単語を揃えるべき音符がすべてボイス コンテキストの中にある場合に有用です。@c
詳細は @ref{Stanzas} を参照してください。

@item
歌詞を @code{\lyricmode} で入力し、音節の演奏時間を明示的に示すことで、@c
歌詞を音符とは独立して揃えることができます。

@c KEEP LY
@lilypond[quote,ragged-right,verbatim]
<<
  \new Voice = "one" \relative {
    \time 2/4
    c''4 b8. a16 g4. f8 e4 d c2
  }

% 前で指定された演奏時間 2 を用います
  \new Lyrics \lyricmode {
    Joy to the earth!
  }

% 音符とは異なるリズムをセットするために、演奏時間を明示します
  \new Lyrics \lyricmode {
    Life4 is love,2. live4 life.2
  }
>>
@end lilypond

歌詞の 1 番は演奏時間が指定されず、各単語には前の値 2 がされるため、@c
音符と揃いません。

歌詞の 2 番は音符とは全く独立して単語を揃える方法を示しています。@c
この方法は、歌詞の 1 番と 2 番で音符への単語の揃え方が異なり、@c
単語を揃えるべき音符がボイス コンテキストから得られない場合に有用です。@c
詳細は @ref{Manual syllable durations} を参照してください。@c
このテクニックは譜の上に会話をセットする場合にも有用です
-- これの例は @ref{Dialogue over music} を参照してください。

@end itemize

@morerefs
学習マニュアル:
@rlearning{Aligning lyrics to a melody}

記譜法リファレンス:
@ref{Contexts explained},
@ref{Automatic syllable durations},
@ref{Stanzas},
@ref{Manual syllable durations},
@ref{Dialogue over music},
@ref{Manual syllable durations}

内部リファレンス:
@rinternals{Lyrics}


@node Automatic syllable durations
@unnumberedsubsubsec 歌詞音節の自動演奏時間

@cindex syllable duration, automatic (歌詞音節の自動演奏時間)
@cindex lyrics, and melodies (歌詞と旋律)
@funindex associatedVoice
@funindex \addlyrics
@funindex \lyricsto

以下の 3 つの方法で歌詞を旋律の音符に揃えることができます:

@itemize

@item
@code{\lyricsto} で旋律を保持しているボイス コンテキストを指定します。

@item
@code{\addlyrics} で歌詞を入力して、@c
それを旋律を保持しているボイス コンテキストの直後に配置します。

@item
任意のタイミングで @code{associatedVoice} プロパティを設定することで@c
歌詞の揃えを名前を持つ他のボイス コンテキストに切り替えます。

@end itemize

3 つの方法のいずれでも、単語の音節の間にハイフンを描き、@c
単語の後ろに延長線を描くことができます。@c
詳細は @ref{Extenders and hyphens} を参照してください。

歌詞を揃える @code{Voice} コンテキストが @qq{消滅} してはいけません。@c
さもないと、その後の歌詞は失われてしまいます。@c
ボイスは何もすることが無くなると消滅する可能性があります
-- @ref{Keeping contexts alive} を参照してください。

@subheading @code{\lyricsto} を用いる

@funindex \lyricsto

旋律を保持している名前の付いたボイス コンテキストを
@code{\lyricsto} で指定することにより、@c
歌詞を旋律の下に揃えることができます:

@lilypond[quote,verbatim]
<<
  \new Voice = "melody" \relative {
    a'1 a4. a8 a2
  }
  \new Lyrics \lyricsto "melody" {
    These are the words
  }
>>
@end lilypond

@noindent
これは歌詞を名前の付いた @code{Voice} コンテキストに揃えます
-- @code{Voice} コンテキストは既に存在している必要があります。@c
このため、普通は @code{Voice} コンテキストを先に記述して、@c
その後に @code{Lyrics} コンテキストを記述します。@c
歌詞自体は @code{\lyricsto} コマンドの後に記述します。@c
@code{\lyricsto} コマンドは自動的に歌詞モードを呼び出します。@c
デフォルトでは、歌詞は音符の下に配置されます。@c
配置場所を変更する方法は @ref{Placing lyrics vertically} を参照してください。

@subheading @code{\addlyrics} を用いる

@funindex \addlyrics

@code{\addlyrics} コマンドは便利なショートカットで、@c
もっと複雑な LilyPond 構造を使う歌詞のセットアップの代わりとして@c
用いることができます。

@example
@{ MUSIC @}
\addlyrics @{ LYRICS @}
@end example

@noindent
上記は下記と同等です:

@example
\new Voice = "blah" @{ MUSIC @}
\new Lyrics \lyricsto "blah" @{ LYRICS @}
@end example

ここで例を挙げます:

@lilypond[verbatim,quote]
{
  \time 3/4
  \relative { c'2 e4 g2. }
  \addlyrics { play the game }
}
@end lilypond

@code{\addlyrics} セクションを追加することで、@c
歌詞の 2 番、3 番を追加することができます:


@lilypond[ragged-right,verbatim,quote]
{
  \time 3/4
  \relative { c'2 e4 g2. }
  \addlyrics { play the game }
  \addlyrics { speel het spel }
  \addlyrics { joue le jeu }
}
@end lilypond

コマンド @code{\addlyrics} は多声を扱うことはできません。@c
また、このコマンドは @code{TabVoice} に歌詞を関連付けることもできません。@c
そのような場合は @code{\lyricsto} を使うべきです。

@subheading associatedVoice を用いる

@code{associatedVoice} プロパティを設定することで、@c
歌詞を揃える旋律を変更することができます:

@example
\set associatedVoice = "lala"
@end example

@noindent

プロパティの値 (ここでは "lala" です) は
@code{Voice} コンテキストの名前になります。@c
技術的な理由により、@c
変更を適用する歌詞の音節の前にこの @code{set} コマンドを配置する必要があります。

ここで、使用例を挙げます:

@c KEEP LY
@lilypond[quote,ragged-right,verbatim]
<<
  \new Staff <<
    \time 2/4
    \new Voice = "one" \relative {
      \voiceOne
      c''4 b8. a16 g4. r8 a4 ( b ) c2
    }
    \new Voice = "two" \relative {
      \voiceTwo
       s2 s4. f'8 e8 d4. c2
    }
  >>
% 最初は "one" の音符に揃えます
% それから "two" に切り替えます
  \new Lyrics \lyricsto "one" {
    No more let
    \set associatedVoice = "two"  % 切り替える音節の前にセットする必要があります
    sins and sor -- rows grow.
  }
>>
@end lilypond

@morerefs
記譜法リファレンス:
@ref{Extenders and hyphens},
@ref{Keeping contexts alive},
@ref{Placing lyrics vertically}


@node Manual syllable durations
@unnumberedsubsubsec 歌詞音節の手動演奏時間

複雑な声楽では、@c
歌詞を音符とは完全に独立させて配置する方が望ましい場合があります。@c
そのような場合、@code{\lyricsto} や @code{\addlyrics} を用いたり、@c
@code{associatedVoice} プロパティを設定したりはしません。@c
歌詞の音節を音符のように
-- しかしながら、ピッチをテキストに置き換えて --
入力し、歌詞の各音節の後には演奏時間を明示的に記述します。

音節の間にハイフンを描くことは普通にできますが、@c
延長線を描くには関連付されたボイスが存在する必要があります。

ここで、2 つの例を挙げます:

@lilypond[verbatim,quote]
<<
  \new Voice = "melody" \relative {
    c''2 a f f e e
  }
  \new Lyrics \lyricmode {
    c4. -- a -- f -- f -- e2. -- e
  }
>>
@end lilypond


@lilypond[quote,verbatim,ragged-right]
<<
  \new Staff {
    \relative {
      c''2 c2
      d1
    }
  }
  \new Lyrics {
    \lyricmode {
      I2 like4. my8 cat!1
    }
  }
  \new Staff {
    \relative {
      c'8 c c c c c c c
      c8 c c c c c c c
    }
  }
>>
@end lilypond

このテクニックは、譜の上に会話を書く場合に有用です
-- @ref{Dialogue over music} を参照してください。

歌詞の水平位置を変更するには、@code{self-alignment-X} プロパティを@c
オーバライドします:

@lilypond[verbatim,quote]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    c'2 e4 g2 f
  }
  \new Lyrics \lyricmode {
    \override LyricText.self-alignment-X = #LEFT
    play1 a4 game4
  }
>>
@end lilypond

@morerefs
記譜法リファレンス:
@ref{Dialogue over music}

内部リファレンス:
@rinternals{Lyrics},
@rinternals{Voice}


@node Multiple syllables to one note
@unnumberedsubsubsec 複数の歌詞音節を 1 つの音符に割り当てる

@funindex _
@cindex space, in lyrics (歌詞の中での空白)
@cindex quote, in lyrics (歌詞の中での引用符)
@cindex tie, in lyrics (歌詞の中でのタイ)

1 つの音符にスペースで区切られた複数の音節を割り当てるには、@c
そのフレーズを引用符で囲むか、@code{_} 文字を用います。@c
代替手段として、チルド記号 (@code{~}) を用いて音節をタイで結ぶこともできます。

@lilypond[quote,ragged-right,verbatim]
{
  \relative {
    \autoBeamOff
    r8 b' c fis, fis c' b e,
  }
  \addlyrics
  {
    \override LyricHyphen.minimum-distance = #1.0 % Ensure hyphens are visible
    Che_in ques -- ta_e_in quel -- l'al -- tr'on -- da
  }
  \addlyrics { "Che in" ques -- "ta e in" quel -- l'al -- tr'on -- da }
  \addlyrics { Che~in ques -- ta~e~in quel -- l'al -- tr'on -- da }
}
@end lilypond


@morerefs
内部リファレンス:
@rinternals{LyricCombineMusic}


@node Multiple notes to one syllable
@unnumberedsubsubsec 複数の音符を 1 つの歌詞音節に割り当てる

@cindex melisma (メリスマ)
@cindex melismata (メリスマ)
@cindex phrasing, in lyrics (歌詞の中でのフレーズ)
@funindex \melisma
@funindex \melismaEnd

しばしば、特に中世やバロックの音楽では、1 つの音節を複数の音符で歌います。@c
これをメリスマと呼びます。@rglos{melisma} を参照してください。@c
通常、メリスマの音節はメリスマの最初の音符に左揃えされます。

メリスマが単語の最後ではない音節で発生する場合、@c
その音節と次の音節をハイフンで結びます。@c
これは音節の直後に 2 重ハイフン @code{--} を配置することで示します。

メリスマが単語の最後の音節または音節が 1 つしかない単語で発生する場合、@c
最後の音節からメリスマの最後の音符まで延長線を描きます。@c
これは単語の直後に 2 重アンダースコア @code{__} を配置することで示します。

メリスマを示す方法は 5 つあります:

@itemize

@item
タイで結ばれた音符には、自動的にメリスマが作成されます:

@lilypond[quote,verbatim]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    f''4 g2 ~ |
    4 e2 ~ |
    8
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- e __
  }
>>
@end lilypond

@item
各メリスマの音符にスラーを配置することで、@c
譜から自動的にメリスマを作成することができます。@c
これが歌詞を入力する通常の方法です:

@lilypond[quote,verbatim]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    f''4 g8 ( f e f )
    e8 ( d e2 )
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- e __
  }
>>
@end lilypond

フレージング スラーはメリスマの作成には影響を与えないことに注意して@c
ください。

@item
自動連桁を off にして、手動で連桁を付けられた音符はメリスマと見なされます。@c
@ref{Setting automatic beam behavior} を参照してください。

@lilypond[quote,verbatim]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    \autoBeamOff
    f''4 g8[ f e f]
    e2.
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- e
  }
>>
@end lilypond

この例はメリスマに 8 分音符よりも長い音符を含めているため、@c
明らかに不適切です。

@item
スラーが付いていない音符でも、@c
@code{\melisma} と @code{\melismaEnd} で囲まれていればメリスマとして扱われます。

@lilypond[quote,verbatim]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    f''4 g8
    \melisma
    f e f
    \melismaEnd
    e2.
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- e
  }
>>
@end lilypond

@item
メリスマに含まれる余分な各音符に対して@c
歌詞の中にアンダースコア @code{_} を記述することで、@c
メリスマを定義することができます。

@lilypond[verbatim, quote]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    f''4 g8 f e f
    e8 d e2
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- _ _ _ e __ _ _
  }
>>
@end lilypond

@end itemize

旋律の中のタイ、スラー、それに手動連桁をメリスマにしないことも可能です。@c
メリスマにしないためには、@code{melismaBusyProperties} を設定します:

@lilypond[verbatim,quote]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    \set melismaBusyProperties = #'()
    c'4 d ( e )
    g8 [ f ] f4 ~ 4
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- e e -- le -- i -- son
  }
>>
@end lilypond

@code{melismaBusyProperties} に対する設定を変えることで、@c
メリスマの自動検出にタイ、スラー、それに連桁を@c
含める / 除外することができます。@c
@rinternals{Tunable context properties} の @code{melismaBusyProperties}
を参照してください。

代替手段として、@code{ignoreMelismata} に真をセットすることで@c
すべてのメリスマを無視することができます。@c
@ref{Stanzas with different rhythms} を参照してください。

@code{melismaBusyProperties} がアクティブになっているパッセージの中で@c
メリスマを使う必要がある場合、@c
メリスマに含める各音符に対して歌詞の中にアンダースコアを記述します:

@lilypond[verbatim,quote]
<<
  \new Voice = "melody" \relative {
    \time 3/4
    \set melismaBusyProperties = #'()
    c'4 d ( e )
    g8 [ f ] ~ 4 ~ f
  }
  \new Lyrics \lyricsto "melody" {
    Ky -- ri -- _ e __ _ _ _
  }
>>
@end lilypond


@predefined

@code{\autoBeamOff},
@code{\autoBeamOn},
@code{\melisma},
@code{\melismaEnd}
@endpredefined

@morerefs
音楽用語集:
@rglos{melisma}

学習マニュアル:
@rlearning{Aligning lyrics to a melody}

記譜法リファレンス:
@ref{Aligning lyrics to a melody},
@ref{Automatic syllable durations},
@ref{Setting automatic beam behavior},
@ref{Stanzas with different rhythms}

内部リファレンス:
@rinternals{Tunable context properties}

@knownissues
メリスマの延長線は自動的には作成されません。@c
手動で 2 重アンダースコアを記述する必要があります。


@node Extenders and hyphens
@unnumberedsubsubsec 延長線とハイフン

@cindex melisma (メリスマ)
@cindex extender (延長線)

@c TODO cf Multiple notes to one syllable; should this be merged in?

@c leave this as samp. -gp
しばしば単語の最後の音節で、@c
その音節から次の音節まで長い水平の線を描いてメリスマを示すことがあります。@c
そのような線のことを延長線と呼び、@samp{ __ } で記述します
(2 重アンダースコアの前後にスペースがあることに注意してください)。

@warning{
楽譜の中でメリスマは延長線で示され、@c
延長線は 2 重のアンダースコアとして入力します。@c
しかしながら、個々の音符をスキップすることで短いメリスマを作ることも可能です。@c
音符のスキップには単一のアンダースコアを記述します
-- デフォルトでは、音符のスキップは延長線を作り出しません。
}

@cindex hyphen (ハイフン)

@c leave this as samp. -gp
同じ単語の音節間の中央にハイフンを記譜するには、@c
@samp{ -- } を記述します
(2 重ハイフンの前後にスペースがあることに注意してください)。@c
ハイフンは音節の間の中央に配置され、@c
長さは音節の間のスペースによって調節されます。

密に譜刻された楽譜では、ハイフンが削除されることもあります。@c
ハイフンが削除されるかどうかを
@code{LyricHyphen} のプロパティ
@code{minimum-distance} (2 つの音節の間の最小間隔) と
@code{minimum-length} (ハイフンを削除するかどうかの閾値) で@c
制御することができます。

@morerefs
内部リファレンス:
@rinternals{LyricExtender},
@rinternals{LyricHyphen}


@node Gradual changes of vowel
@unnumberedsubsubsec 母音の段階的な変化

@cindex vowel transition (母音の遷移)

音節間の矢印で示される可能性のある母音の遷移
(母音または持続する子音の段階的な変化) は、
@code{\vowelTransition} コマンドで入力します
(Gould pp. 452--453 を参照してください)。@c
矢印は遷移の長さを示し、デフォルトでは常に描画されます
(ぎっしりと譜刻された音楽では、必要に応じてスペースが追加されます)。@c
ピッチが変化しない音符間のタイやスラーは、母音の変化にもかかわらず、@c
新しいアーティキュレーションがないことを示しています。矢印の最小の長さは、
@code{VowelTransition} の @code{minimum-length} プロパティで調整できます。

@lilypond[verbatim,quote]
{
  c'2 c'
  \set melismaBusyProperties = #'()
  c'2 ~ c'
  \time 3/2
  d'4( e' f' e' f'2
  e'2.)
}
\addlyrics
{
  Ah \vowelTransition oh,
  ah \vowelTransition oh,
  ah \vowelTransition _ _ _ _
  oh.
}
@end lilypond

@morerefs
音楽用語集:
@rglos{vowel transition}

内部リファレンス:
@rinternals{VowelTransition}


@need 1500
@node Techniques specific to lyrics
@subsection 歌詞に特有のテクニック

@c TODO this whole section is to be reorganised


@node Working with lyrics and variables
@unnumberedsubsubsec 歌詞と変数に取り組む

@cindex lyrics, using variables (歌詞に変数を用いる)

歌詞を保持する変数を作成することができます。@c
歌詞は歌詞モードで入力する必要があります:

@lilypond[quote,verbatim]
musicOne = \relative {
  c''4 b8. a16 g4. f8 e4 d c2
}
verseOne = \lyricmode {
  Joy to the world, the Lord is come.
}
\score {
  <<
    \new Voice = "one" {
      \time 2/4
      \musicOne
    }
    \new Lyrics \lyricsto "one" {
      \verseOne
    }
  >>
}
@end lilypond

変数が @code{\addlyrics} または @code{\lyricsto} で呼び出される場合、@c
歌詞に演奏時間を付ける必要はありません。

順序が異なったり、もっと複雑だったりする場合、@c
最も良い方法は最初に音楽と歌詞を保持する変数を定義して、
譜と歌詞の階層をセットアップして (歌詞自体は省略します) から、@c
@code{\context} を用いて歌詞を追加します。@c
この方法は、@code{\lyricsto} によって参照されるボイスが@c
常に定義済みであることを保証します。@c
例を挙げます:

@lilypond[quote,verbatim]
sopranoMusic = \relative { c''4 c c c }
contraltoMusic = \relative { a'4 a a a }
sopranoWords = \lyricmode { Sop -- ra -- no words }
contraltoWords = \lyricmode { Con -- tral -- to words }

\score {
  \new ChoirStaff <<
    \new Staff {
      \new Voice = "sopranos" {
        \sopranoMusic
      }
    }
    \new Lyrics = "sopranos"
    \new Lyrics = "contraltos"
    \new Staff {
      \new Voice = "contraltos" {
        \contraltoMusic
      }
    }
    \context Lyrics = "sopranos" {
      \lyricsto "sopranos" {
        \sopranoWords
      }
    }
    \context Lyrics = "contraltos" {
      \lyricsto "contraltos" {
        \contraltoWords
      }
    }
  >>
}
@end lilypond

@morerefs
記譜法リファレンス:
@ref{Placing lyrics vertically}

内部リファレンス:
@rinternals{LyricCombineMusic},
@rinternals{Lyrics}


@node Placing lyrics vertically
@unnumberedsubsubsec 歌詞の垂直方向の配置

@cindex placement, lyrics (歌詞の配置)
@cindex lyrics, positioning (歌詞を配置する)

音楽の種類によって、歌詞が譜の上、下、あるいは間に配置されることもあります。@c
歌詞を関連する譜の下に配置することが最も簡単で、@c
@code{Staff} コンテキストの下に @code{Lyrics} コンテキストを定義するだけで@c
実現できます:

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff {
      \new Voice = "melody" {
        \relative { c''4 c c c }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Here are the words
      }
    }
  >>
}
@end lilypond

歌詞を譜の上に配置する方法は 2 つあります。@c
簡単な (そして好まれる) のは、@c
上記と同じ構文を用いて歌詞の配置を明示的に指定する方法です:

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff = "staff" {
      \new Voice = "melody" {
        \relative { c''4 c c c }
      }
    }
    \new Lyrics \with { alignAboveContext = "staff" } {
      \lyricsto "melody" {
        Here are the words
      }
    }
  >>
}
@end lilypond

代替手段として、2 ステップのプロセスを用いることもできます。@c
最初に、@code{Staff} コンテキストと @code{Voice} コンテキストより先に
@code{Lyrics} コンテキストを宣言して (内容は記述しません)、@c
それから参照する @code{Voice} コンテキストの宣言の後に
@code{\context} を用いて @code{\lyricsto} コマンドを配置します。@c
以下のようにします:

@c KEEP LY
@lilypond[quote,verbatim]
\score {
  <<
    \new Lyrics = "lyrics" \with {
      % 譜の上に配置する歌詞は以下のオーバライドを行う必要があります
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff {
      \new Voice = "melody" {
        \relative { c''4 c c c }
      }
    }
    \context Lyrics = "lyrics" {
      \lyricsto "melody" {
        Here are the words
      }
    }
  >>
}
@end lilypond

別々の譜に配置される 2 つのボイスがある場合、@c
上記の方法のいずれかを用いて歌詞を譜の間に配置することができます。@c
ここでは、2 番目の方法を用いる例を挙げます:

@c KEEP LY
@lilypond[quote,verbatim]
\score {
  \new ChoirStaff <<
    \new Staff {
      \new Voice = "sopranos" {
        \relative { c''4 c c c }
      }
    }
    \new Lyrics = "sopranos"
    \new Lyrics = "contraltos" \with {
      % 譜の上に配置する歌詞は以下のオーバライドを行う必要があります
      % lyrics above a staff should have this override
      \override VerticalAxisGroup.staff-affinity = #DOWN
    }
    \new Staff {
      \new Voice = "contraltos" {
        \relative { a'4 a a a }
      }
    }
    \context Lyrics = "sopranos" {
      \lyricsto "sopranos" {
        Sop -- ra -- no words
      }
    }
    \context Lyrics = "contraltos" {
      \lyricsto "contraltos" {
        Con -- tral -- to words
      }
    }
  >>
}
@end lilypond

他の歌詞と譜の組み合わせは、上記の例に磨きをかけるか、学習マニュアルの@c
中にあるテンプレート -- @rlearning{Vocal ensembles templates} を参照して@c
ください -- を吟味することによって作り出すことができます。

@snippets

@cindex lyrics, version 2.12 spacing (バージョン 2.12 のスペーシングの歌詞)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/obtaining-2.12-lyrics-spacing-in-newer-versions.ly}

@morerefs
学習マニュアル:
@rlearning{Vocal ensembles templates}

記譜法リファレンス:
@ref{Context layout order},
@ref{Creating and referencing contexts}


@node Placing syllables horizontally
@unnumberedsubsubsec 歌詞の水平方向の配置

@cindex spacing lyrics (歌詞の間隔)
@cindex lyrics, increasing space between (歌詞の間隔を広げる)

歌詞の間隔を広げるには
@code{LyricSpace} の @code{minimum-distance} プロパティを設定します。

@lilypond[verbatim,quote,ragged-right]
\relative c' {
  c c c c
  \override Lyrics.LyricSpace.minimum-distance = #1.0
  c c c c
}
\addlyrics {
  longtext longtext longtext longtext
  longtext longtext longtext longtext
}
@end lilypond

@noindent
この変更を楽譜の全ての歌詞に適用するには、@c
@code{\layout} ブロックの中でプロパティの設定を行います。

@lilypond[verbatim,quote,ragged-right]
\score {
  \relative {
  c' c c c
  c c c c
  }
  \addlyrics {
  longtext longtext longtext longtext
  longtext longtext longtext longtext
  }
  \layout {
    \context {
      \Lyrics
      \override LyricSpace.minimum-distance = #1.0
    }
  }
}
@end lilypond

@cindex lyrics, horizontal alignment (歌詞の水平揃え)
@cindex alignment, horizontal, lyrics (歌詞の水平揃え)
@cindex horizontal alignment, lyrics (歌詞の水平揃え)
@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/lyrics-alignment.ly}

@knownissues

@cindex lyrics, keeping inside margin (歌詞を余白内に収める)
テキスト スクリプトと歌詞がマージンの中に収まることを確認するチェックは@c
より多くの計算を必要とします。@c
この機能を無効にすることで、処理をわずかにスピードアップすることができます:

@example
\override Score.PaperColumn.keep-inside-line = ##f
@end example

@cindex lyrics, avoid bar lines (歌詞が小節線を避けるようにする)
@cindex bar line, avoided by lyrics (歌詞が小節線を避けるようにする)

歌詞が小節線を避けるようにするには、以下を使います:

@example
\layout @{
  \context @{
    \Lyrics
      \consists Bar_engraver
      \consists Separating_line_group_engraver
      \hide BarLine
  @}
@}
@end example


@node Lyrics and repeats
@unnumberedsubsubsec 歌詞と繰り返し

@cindex repeat, and lyrics (繰り返しと歌詞)
@cindex lyrics, repeating (歌詞を繰り返す)

@subheading 1 回の繰り返し

@emph{音楽} の繰り返しは別の場所で説明しています
-- @ref{Repeats} を参照してください。@c
このセクションでは、@c
歌詞を繰り返しのある音楽に追加する方法について説明します。

繰り返しで歌詞の単語が変わらないのであれば、@c
歌詞を音楽と同じ繰り返し構造にすることで、音楽に歌詞を付けることができます。

@lilypond[verbatim,quote]
\score {
  <<
    \new Staff {
      \new Voice = "melody" {
        \relative {
          a'4 a a a
          \repeat volta 2 { b4 b b b }
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Not re -- peat -- ed.
        \repeat volta 2 { Re -- peat -- ed twice. }
      }
    }
  >>
}
@end lilypond

繰り返しが展開された場合、歌詞も展開されます。

@lilypond[verbatim,quote]
\score {
  \unfoldRepeats {
    <<
      \new Staff {
        \new Voice = "melody" {
          \relative {
            a'4 a a a
            \repeat volta 2 { b4 b b b }
          }
        }
      }
      \new Lyrics {
        \lyricsto "melody" {
          Not re -- peat -- ed.
          \repeat volta 2 { Re -- peat -- ed twice. }
        }
      }
    >>
  }
}
@end lilypond

繰り返しが展開されて、異なる歌詞を持つ場合、@c
単に歌詞の全ての単語を記述します:

@lilypond[verbatim,quote,ragged-right]
\score {
  <<
    \new Staff {
      \new Voice = "melody" {
        \relative {
          a'4 a a a
          \repeat unfold 2 { b4 b b b }
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Not re -- peat -- ed.
        The first time words.
        Sec -- ond time words.
      }
    }
  >>
}
@end lilypond

繰り返しの歌詞が異なる場合、@c
並列に正しくネストされた別々の @code{Lyrics} コンテキストに@c
各繰り返しの歌詞を入力する必要があります:

@lilypond[verbatim,quote]
\score {
  <<
    \new Staff {
      \new Voice = "melody" {
        \relative {
          a'4 a a a
          \repeat volta 2 { b4 b b b }
        }
      }
    }
    \new Lyrics \lyricsto "melody" {
      Not re -- peat -- ed.
      <<
	{ The first time words. }
	\new Lyrics {
	  \set associatedVoice = "melody"
	  Sec -- ond time words.
	}
      >>
    }
  >>
}
@end lilypond

同様の方法でさらに歌詞の行を追加することができます:

@lilypond[verbatim,quote]
\score {
  <<
    \new Staff {
      \new Voice = "singleVoice" {
        \relative {
	  a'4 a a a
	  \repeat volta 3 { b4 b b b }
          c4 c c c
	}
      }
    }
    \new Lyrics \lyricsto "singleVoice" {
      Not re -- peat -- ed.
      <<
        { The first time words.	}
	\new Lyrics {
	  \set associatedVoice = "singleVoice"
	  Sec -- ond time words.
	}
	\new Lyrics {
	  \set associatedVoice = "singleVoice"
	  The third time words.
	}
      >>
      The end sec -- tion.
    }
  >>
}
@end lilypond

@funindex alignBelowContext

しかしながら、この構造が @code{ChoirStaff} のような複数の譜を持つ@c
コンテキストに埋め込まれた場合、歌詞の 2 番と 3 番は譜の下に表示されます。

歌詞を正しく配置するには @code{alignBelowContext} を用います:

@lilypond[verbatim,quote]
\score {
  <<
    \new Staff {
      \new Voice = "melody" {
        \relative {
	  a'4 a a a
	  \repeat volta 3 { b4 b b b }
          c4 c c c
	}
      }
    }
    \new Lyrics = "firstVerse" \lyricsto "melody" {
      Not re -- peat -- ed.
      <<
        { The first time words.	}
	\new Lyrics = "secondVerse"
        \with { alignBelowContext = "firstVerse" } {
	  \set associatedVoice = "melody"
	  Sec -- ond time words.
	}
	\new Lyrics = "thirdVerse"
        \with { alignBelowContext = "secondVerse" } {
	  \set associatedVoice = "melody"
	  The third time words.
	}
      >>
      The end sec -- tion.
    }
    \new Voice = "harmony" {
      \relative {
        f'4 f f f \repeat volta 2 { g8 g g4 g2 } a4 a8. a16 a2
      }
    }
  >>
}
@end lilypond



@c TODO positioning a common line of lyrics

@subheading 差し替えのある繰り返し

@cindex lyrics, repeats with alternative endings (差し替えのある繰り返しの歌詞)
@cindex repeating lyrics, with alternative endings (差し替えのある繰り返しの歌詞)
@cindex alternative ending, and lyrics (差し替えのある繰り返しと歌詞)

繰り返し部分の歌詞が同じで、@c
どの @code{\alternative} ブロックも休符で始まるのでなければ、@c
歌詞と音楽で同じ構造を使うことができます。@c
こうすることで @code{\unfoldRepeats} は音楽と歌詞の両方を正しく展開できます。

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff {
      \time 2/4
      \new Voice = "melody" {
        \relative {
          a'4 a a a
          \repeat volta 2 { b4 b }
          \alternative { { b b } { b c } }
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Not re -- peat -- ed.
        \repeat volta 2 { Re -- peat -- }
        \alternative { { ed twice. } { ed twice. } }
      }
    }
  >>
}
@end lilypond

@funindex \skip
@cindex skipping notes in lyrics (歌詞の中で音符をスキップする)
@cindex lyrics, skipping notes (歌詞の中で音符をスキップする)

しかしながら、繰り返し部分の歌詞が異なるか、
どれかの @code{\alternative} ブロックが休符で始まる場合、@c
歌詞に繰り返し構造を用いることはできず、@c
歌詞を適用しない差し替え部分の音符をスキップするために@c
手動で @code{\skip} コマンドを挿入する必要があります。

注意: 音符のスキップにアンダースコア @code{_} を使わないでください
-- アンダースコアはメリスマを意味するため、前の音節が左揃えされてしまいます。

@warning{
@code{@bs{}skip} コマンドの後に数字を記述する必要があります。@c
しかしながら、歌詞は @code{@bs{}addlyrics} や @code{@bs{}lyricsto} で関連付けた@c
旋律の音符から演奏時間を引き出すため、この数字は無視されます。@c
各 @code{@bs{}skip} は後に続く数字の値に関係なく、@c
任意の音価の音符を 1 つスキップします。
}

@lilypond[verbatim,quote,ragged-right]
\score {
  <<
    \new Staff {
      \time 2/4
      \new Voice = "melody" {
        \relative {
          \repeat volta 2 { b'4 b }
          \alternative { { b b } { b c } }
          c4 c
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        The first time words.
        \repeat unfold 2 { \skip 1 }
        End here.
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Sec -- ond
        \repeat unfold 2 { \skip 1 }
        time words.
      }
    }
  >>
}
@end lilypond

@cindex lyrics, and tied notes (歌詞とタイで結ばれた音符)
@funindex \repeatTie

タイが途中で複数の差し替えに分かれる場合、@c
最初の差し替えの音符がタイで結ばれ、@c
2 番目以降の差し替えには @code{\repeatTie} が使用されます。@c
この構造に歌詞が含まれることにより差し替え部分が長くなると、@c
歌詞を音符に揃えることが困難となり、@c
差し替え部分に含まれるタイの音符が受け入れがたい結果を発生させるかもしれません。

タイは最初の差し替えまで続くメリスマを作り出しますが、@c
2 番目以降の差し替えには作りません。@c
このため、歌詞を正しく揃えるには、@c
差し替え部分でメリスマの自動作成を無効にして、@c
手動でスキップを挿入する必要があります。

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff {
      \time 2/4
      \new Voice = "melody" {
        \relative {
          \set melismaBusyProperties = #'()
          \repeat volta 2 { b'4 b ~}
          \alternative { { b b } { b \repeatTie c } }
          \unset melismaBusyProperties
          c4 c
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        \repeat volta 2 { Here's a __ }
        \alternative {
          { \skip 1 verse }
          { \skip 1 sec }
        }
        ond one.
      }
    }
  >>
}
@end lilypond

@code{\repeatTie} を含むセクションの周辺で
@code{\unfoldRepeats} が使われると、@c
両方のタイプのタイが譜刻されるの避けるために
@code{\repeatTie} は削除されます。

繰り返される部分の歌詞が異なる場合、@c
その歌詞の周囲で @code{\repeat} を使うことはできず、@c
前述のように手動で @code{\skip} コマンドを挿入する必要があります。

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff {
      \time 2/4
      \new Voice = "melody" {
        \relative {
          \repeat volta 2 { b'4 b ~}
          \alternative { { b b } { b \repeatTie c } }
          c4 c
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Here's a __ verse.
        \repeat unfold 2 { \skip 1 }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Here's one
        \repeat unfold 2 { \skip 1 }
        more to sing.
      }
    }
  >>
}
@end lilypond

繰り返し部分から差し替え部分に延長線やハイフンを描きたいのであれば、@c
それらを手動で挿入する必要があります。@c
差し替え部分から次の部分に延長線やハイフンを描く場合も同様です。

@lilypond[quote,verbatim]
\score {
  <<
    \new Staff {
      \time 2/4
      \new Voice = "melody" {
        \relative {
          \repeat volta 2 { b'4 b ~}
          \alternative { { b b } { b \repeatTie c } }
          c4 c
        }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Here's a __ verse.
        \repeat unfold 2 { \skip 1 }
      }
    }
    \new Lyrics {
      \lyricsto "melody" {
        Here's "a_"
        \skip 1
        "_" sec -- ond one.
      }
    }
  >>
}
@end lilypond

@morerefs
記譜法リファレンス:
@ref{Keeping contexts alive},
@ref{Repeats}


@node Divisi lyrics
@unnumberedsubsubsec 歌詞のディヴィージ

@cindex divided lyrics (ディヴィージされた歌詞)
@cindex lyrics, divided (ディヴィージされた歌詞)

ピッチが同じで歌詞とリズムが異なる 2 つのパートがある場合、@c
一時的にメリスマの自動検出を off にして、@c
歌詞の中でのメリスマ指示する手法を用いると適切な場合があります:

@lilypond[quote,verbatim]
\score {
  <<
    \new Voice = "melody" {
      \relative c' {
        \set melismaBusyProperties = #'()
        \slurDown
        \slurDashed
        e4 e8 ( e ) c4 c |
        \unset melismaBusyProperties
        c
      }
    }
    \new Lyrics \lyricsto "melody" {
      They shall not o -- ver -- come
    }
    \new Lyrics \lyricsto "melody" {
      We will _
    }
  >>
}
@end lilypond

2 つのパートの音楽と歌詞の両方が異なる場合、@c
2 つの名前付きボイス コンテキストを作成して、@c
それぞれに歌詞を付属させることで、@c
異なる音楽と歌詞として表示させた方が良いかもしれません:

@lilypond[verbatim,ragged-right,quote]
\score {
  <<
    \new Voice = "melody" {
      \relative {
        <<
          {
            \voiceOne
            e'4 e8 e
          }
          \new Voice = "splitpart" {
            \voiceTwo
            c4 c
          }
        >>
        \oneVoice
        c4 c |
        c
      }
    }
    \new Lyrics \lyricsto "melody" {
      They shall not o -- ver -- come
    }
    \new Lyrics \lyricsto "splitpart" {
      We will
    }
  >>
}
@end lilypond

合唱音楽では、一部の小節において声部が分かれることがよくあります。@c
2 つ以上の音楽表記がバックスラッシュ 2 つで分割される
@code{<< @{@dots{}@} \\ @{@dots{}@} >>} 構造は、声部の分割する正しい方法である@c
ように見えます。しかしながらこの構造は、内部にある@strong{全ての}音楽表記を@c
@strong{新しい Voice コンテキスト}に割り当てるため、元の Voice コンテキストに@c
歌詞を設定しても@emph{歌詞は表示されません}。これは通常望むものでは@c
ないでしょう。一時的に多声となる楽節を用いるのが適切です。@c
@ref{Single-staff polyphony} の
@emph{一時的に多声となる楽節 (パッセージ)} 節を参照してください。

@node Polyphony with shared lyrics
@unnumberedsubsubsec 歌詞を共有する多声

@funindex NullVoice
@cindex polyphony, shared lyrics (歌詞を共有する多声)
@cindex lyrics, shared among voices (歌詞を共有する多声)
@cindex @code{\partCombine} and lyrics (@code{\partCombine} と歌詞)
@funindex \partCombine

2 つのボイスが異なるリズムを持ち、同じ歌詞を共有する場合、@c
片方のボイスに歌詞を合わせるともう片方には合いません。@c
下の例では、歌詞が上のボイスにのみ合わせられているため、@c
2 つ目の延長線が短すぎます:

@lilypond[quote,verbatim]
soprano = \relative { b'8( c d c) d2 }
alto = \relative { g'2 b8( a g a) }
words = \lyricmode { la __ la __ }

\new Staff <<
  \new Voice = "sopranoVoice" { \voiceOne \soprano }
  \new Voice { \voiceTwo \alto }
  \new Lyrics \lyricsto "sopranoVoice" \words
>>
@end lilypond

望んでいた結果を得るには、2 つのボイスを適切に合わせた新たな
@code{NullVoice} コンテキストを作り、歌詞をそれに合わせます。@c
@code{NullVoice} コンテキストの音符は出力には現れませんが、@c
歌詞を正しく合わせるのに使うことができます:

@lilypond[quote,verbatim]
soprano = \relative { b'8( c d c) d2 }
alto = \relative { g'2 b8( a g a) }
aligner = \relative { b'8( c d c) b( a g a) }
words = \lyricmode { la __ la __ }

\new Staff <<
  \new Voice { \voiceOne \soprano }
  \new Voice { \voiceTwo \alto }
  \new NullVoice = "aligner" \aligner
  \new Lyrics \lyricsto "aligner" \words
>>
@end lilypond

この方法は、単体では歌詞をサポートしていない
@code{\partCombine} 関数にも用いることができます:

@lilypond[quote,verbatim]
soprano = \relative { b'8( c d c) d2 }
alto = \relative { g'2 b8( a g a) }
aligner = \relative { b'8( c d c) b( a g a) }
words = \lyricmode { la __ la __ }

\new Staff <<
  \new Voice \partCombine \soprano \alto
  \new NullVoice = "aligner" \aligner
  \new Lyrics \lyricsto "aligner" \words
>>
@end lilypond

@knownissues
@code{\addlyrics} 関数は @code{Voice} にのみ動作するため、@c
@code{NullVoice} と一緒に用いることはできません。

@noindent
@code{\partCombine} 関数については、@ref{Automatic part combining}に説明があります。

最後に、この方法はボイスが異なる譜にある場合にも用いることができ、@c
2 つよりも多くのボイスにも適用することができます:

@lilypond[quote,verbatim]
soprano = \relative { b'8( c d c) d2 }
altoOne = \relative { g'2 b8( a b4) }
altoTwo = \relative { d'2 g4( fis8 g) }
aligner = \relative { b'8( c d c) d( d d d) }
words = \lyricmode { la __ la __ }

\new ChoirStaff \with {\accepts NullVoice } <<
  \new Staff \soprano
  \new NullVoice = "aligner" \aligner
  \new Lyrics \lyricsto "aligner" \words
  \new Staff \partCombine \altoOne \altoTwo
>>
@end lilypond


@need 1500
@node Stanzas
@subsection 歌詞の節


@node Adding stanza numbers
@unnumberedsubsubsec 歌詞の節番号を追加する

@cindex stanza number (歌詞番号)

@code{stanza} を設定することにより、歌詞の節番号を追加することができます。@c
例を挙げます:

@lilypond[quote,ragged-right,verbatim]
\new Voice \relative {
  \time 3/4 g'2 e4 a2 f4 g2.
} \addlyrics {
  \set stanza = "1. "
  Hi, my name is Bert.
} \addlyrics {
  \set stanza = "2. "
  Oh, ché -- ri, je t'aime
}
@end lilypond


@noindent
これらの番号は歌詞の前に配置されます。@c
2 行からなる節をグループ化することができます。@c
これは例えば、繰り返しで歌詞が異なる場合に有用です:

@lilypond[quote,ragged-right,verbatim]
leftbrace = \markup {
  \override #'(font-encoding . fetaBraces)
  \lookup "brace80"
}

stanzaOneOne = \lyricmode {
  \set stanza = \markup {
    \column { \vspace #.33 "1. "}
    \leftbrace
  }
  Child, you’re mine and I love you.
  Lend thine ear to what I say.
}

stanzaOneThree = \lyricmode {
  Child, I have no great -- er joy
  Than to have you walk in truth.
}

\new Voice {
  \repeat volta 2 {
    c'8 c' c' c' c' c' c'4
    c'8 c' c' c' c' c' c'4
  }
}
\addlyrics { \stanzaOneOne }
\addlyrics { \stanzaOneThree }

@end lilypond

@node Adding dynamics marks to stanzas
@unnumberedsubsubsec 歌詞の節に強弱記号を追加する

歌詞の前に強弱記号を配置することによって、@c
歌詞の音の大きさの違いを示すことができます。@c
LilyPond では、@c
歌詞の前に配置されるものはすべて @code{StanzaNumber} オブジェクトに@c
格納します -- 強弱記号も同じです。@c
技術的な理由により、歌詞の設定を @code{\lyricmode} の外で行う必要があります:

@lilypond[quote,ragged-right,verbatim]
text = {
  \set stanza = \markup { \dynamic "ff" "1. " }
  \lyricmode {
    Big bang
  }
}

<<
  \new Voice = "tune" {
    \time 3/4
    g'4 c'2
  }
\new Lyrics \lyricsto "tune" \text
>>
@end lilypond

@node Adding singers' names to stanzas
@unnumberedsubsubsec 歌詞の節に歌手の名前を追加する

@cindex singer name (歌手名)
@cindex name of singer (歌手の名前)

歌手の名前を追加することもできます。@c
歌手の名前は、楽器名と同様に、行の先頭に譜刻されます。@c
@code{vocalName} を設定することにより、歌手名を作成します。@c
@code{shortVocalName} として短縮名を入力することができます。

@lilypond[ragged-right,quote,verbatim]
\new Voice \relative {
  \time 3/4 g'2 e4 a2 f4 g2.
} \addlyrics {
  \set vocalName = "Bert "
  Hi, my name is Bert.
} \addlyrics {
  \set vocalName = "Ernie "
  Oh, ché -- ri, je t'aime
}
@end lilypond

@node Stanzas with different rhythms
@unnumberedsubsubsec リズムが異なる歌詞の節

しばしば、@c
1 つの歌で歌詞の節によって歌詞を旋律に配置する仕方が若干異なる場合があります。@c
そのような変化も @code{\lyricsto} で対応することができます。

@subsubheading メリスマを無視する

歌詞のある節ではメリスマになっているものが、@c
他の節では複数の音節に分かれている場合があります。@c
これを実現するには、複数音節に分かれるボイスはメリスマを無視するようにします。@c
これは Lyrics コンテキストの中で @code{ignoreMelismata} を設定します。

@lilypond[verbatim,ragged-right,quote]
<<
  \relative \new Voice = "lahlah" {
    \set Staff.autoBeaming = ##f
    c'4
    \slurDotted
    f8.[( g16])
    a4
  }
  \new Lyrics \lyricsto "lahlah" {
    more slow -- ly
  }
  \new Lyrics \lyricsto "lahlah" {
    go
    \set ignoreMelismata = ##t
    fas -- ter
    \unset ignoreMelismata
    still
  }
>>
@end lilypond

@knownissues
たいていの @code{\set} コマンドとは異なり、@c
@code{\set ignoreMelismata} は前に @code{\once} があると機能しません。@c
メリスマを無視させる歌詞の範囲を
@code{\set} と @code{\unset} で囲む必要があります。

@subsubheading 装飾小音符に音節を割り当てる

@cindex grace note, and lyrics (装飾小音符と歌詞)
@cindex lyrics, on grace notes (装飾小音符の歌詞)

デフォルトでは、@code{\lyricsto} を用いても装飾小音符 (つまり、@code{\grace})
には音節は割り当てられません。@c
しかしながら、この振る舞いを変更することができます:

@lilypond[verbatim,ragged-right,quote]
<<
  \new Voice = melody \relative {
    f'4 \appoggiatura a32 b4
    \grace { f16 a16 } b2
    \afterGrace b2 { f16[ a16] }
    \appoggiatura a32 b4
    \acciaccatura a8 b4
  }
  \new Lyrics
  \lyricsto melody {
    normal
    \set includeGraceNotes = ##t
    case,
    gra -- ce case,
    after -- grace case,
    \set ignoreMelismata = ##t
    app. case,
    acc. case.
  }
>>
@end lilypond

@knownissues
@code{associatedVoice} と同様に、@c
@code{includeGraceNotes} は少なくとも装飾小音符に割り当てる音節よりも前に@c
設定する必要があります。@c
装飾小音符が音楽の始めにある場合は、@c
@code{\with} または @code{\context} ブロックを使うことを検討してください:

@lilypond[verbatim,ragged-right,quote]
<<
  \new Voice = melody \relative c' {
    \grace { c16( d e f }
    g1) f
  }
  \new Lyrics \with { includeGraceNotes = ##t }
  \lyricsto melody {
    Ah __ fa
  }
>>
@end lilypond

@subsubheading 代替の旋律に切り替える

@funindex associatedVoice
@cindex alternative melody, switching to (代替の旋律に切り替える)

音楽への歌詞の割り当て方をもっと複雑に変化させることができます。@c
@code{associatedVoice} プロパティを設定することで、@c
歌詞の中で歌詞を割り当てる旋律を変更することができます:

@c KEEP LY
@lilypond[verbatim,quote]
<<
  \relative \new Voice = "lahlah" {
    \set Staff.autoBeaming = ##f
    c'4
    <<
      \new Voice = "alternative" {
        \voiceOne
        \tuplet 3/2 {
          % show associations clearly.
          \override NoteColumn.force-hshift = #-3
          f8 f g
        }
      }
      {
        \voiceTwo
        f8.[ g16]
        \oneVoice
      } >>
    a8( b) c
  }
  \new Lyrics \lyricsto "lahlah" {
    Ju -- ras -- sic Park
  }
  \new Lyrics \lyricsto "lahlah" {
    % トリック: associatedVoice を 1 音節早く設定する必要があります!
    \set associatedVoice = "alternative" % "ran" に適用されます
    Ty --
    ran --
    no --
    \set associatedVoice = "lahlah" % "rus" に適用されます
    sau -- rus Rex
  } >>
@end lilypond

@noindent
歌詞の 1 番のテキストは通常の方法で旋律 @q{lahlah} に割り当てられます。@c
しかしながら、@c
歌詞の 2 番は最初は @code{lahlah} コンテキストに割り当てられていますが、@c
音節 @q{ran} から @q{sau} までの割り当てが旋律 @code{alternative} に@c
切り替わります:

@example
\set associatedVoice = "alternative" % "ran" に適用されます
Ty --
ran --
no --
\set associatedVoice = "lahlah" % "rus" に適用されます
sau -- rus Rex
@end example

@noindent
ここで、@c
@code{alternative} は 3 連符を保持している @code{Voice} コンテキストの名前です。

@code{\set associatedVoice} コマンドの配置に注意してください
-- 1 音節早く出現していますが、これで正しく機能します。

@warning{
@code{@bs{}set associatedVoice} コマンドは、@c
割り当てが新しいボイスに切り替わる音節の前に配置する必要があります。@c
言い換えると、ボイスの変更は予想よりも 1 音節遅く発生します。@c
これは技術的な理由によるものであり、バグではありません。
}


@node Printing stanzas at the end
@unnumberedsubsubsec 歌詞の節を楽譜の終わりに譜刻する

しばしば、歌詞の 1 番を音楽にセットして、@c
残りを詩の形式で楽譜の終わりに追加する方が適切な場合があります。@c
これは、2 番以降を score ブロックの外の @code{\markup} セクションに@c
追加することで実現できます。@c
@code{\markup} で 2 つの方法で改行していることに注意してください。

@lilypond[ragged-right,verbatim,quote]
melody = \relative {
e' d c d | e e e e |
d d e d | c1 |
}

text = \lyricmode {
\set stanza = "1." Ma- ry had a lit- tle lamb,
its fleece was white as snow.
}

\score { <<
  \new Voice = "one" { \melody }
  \new Lyrics \lyricsto "one" \text
>>
  \layout { }
}
\markup {
  \column {
    \line { Verse 2. }
    \line { All the children laughed and played }
    \line { To see a lamb at school. }
  }
}
\markup {
  \wordwrap-string "
  Verse 3.

  Mary took it home again,

  It was against the rule."
}
@end lilypond


@node Printing stanzas at the end in multiple columns
@unnumberedsubsubsec 歌詞の節を楽譜の終わりに複数の列で譜刻する

歌詞の節が多い場合、ページを複数の列に分けて歌詞を譜刻することがあります。@c
しばしば、歌詞番号を列の外側に置くこともあります。@c
以下の例は、LilyPond でそのような出力を作り出す方法を示しています。

@c KEEP LY
@lilypond[ragged-right,quote,verbatim]
melody = \relative {
  c'4 c c c | d d d d
}

text = \lyricmode {
  \set stanza = "1." This is verse one.
  It has two lines.
}

\score {
  <<
    \new Voice = "one" { \melody }
    \new Lyrics \lyricsto "one" \text
  >>
  \layout { }
}

\markup {
  \fill-line {
    \hspace #0.1 % この列を左マージンから離します
    % ページが過密な場合はこの設定を削除します
    \column {
      \line { \bold "2."
        \column {
          "This is verse two."
          "It has two lines."
        }
      }
      \combine \null \vspace #0.1 % 次の歌詞との間に垂直方向のスペースを入れます
      \line { \bold "3."
        \column {
          "This is verse three."
          "It has two lines."
        }
      }
    }
    \hspace #0.1 % 列の間に水平方向のスペースを入れます
    \column {
      \line { \bold "4."
        \column {
          "This is verse four."
          "It has two lines."
        }
      }
      \combine \null \vspace #0.1 % 次の歌詞との間に垂直方向のスペースを入れます
      \line { \bold "5."
        \column {
          "This is verse five."
          "It has two lines."
        }
      }
    }
  \hspace #0.1 % 右マージンに追加のスペースを加えます
  % ページが過密な場合はこの設定を削除します
  }
}
@end lilypond

@morerefs
内部リファレンス:
@rinternals{LyricText},
@rinternals{StanzaNumber}


@need 1500
@node Songs
@subsection 歌曲


@node References for songs
@unnumberedsubsubsec 歌曲のためのリファレンス

通常、歌曲は 3 つの譜に記譜され、@c
上の譜を歌の旋律、下の 2 つの譜をピアノ伴奏とします。@c
歌詞の 1 番は旋律の譜の直下に譜刻されます。@c
歌詞の節が少しであれば 2 番以降を 1 番の下に譜刻することができます。@c
しかしながら、歌詞の節が多くて収容し難い場合は、@c
2 番以降の歌詞を楽譜の後に独立したテキストとして譜刻します。

歌曲を記述するのに必要とされる記譜要素はすべて別の場所で説明しています:

@itemize

@item
譜レイアウトを構築する際は、@ref{Displaying staves} を参照してください。

@item
ピアノ譜を記述する際は、@ref{Keyboard and other multi-staff instruments}
を参照してください。

@item
旋律に沿って歌詞を記述する際は、@ref{Common notation for vocal music}
を参照してください。

@item
歌詞を配置する際は、@ref{Placing lyrics vertically} を参照してください。

@item
歌詞の節を入力する際は、@ref{Stanzas} を参照してください。

@item
しばしば、歌曲は譜の上にコード ネームを付けて譜刻されます。@c
これは、@ref{Displaying chords} で説明しています。

@item
ギター伴奏や他のフレット楽器による伴奏の和音のフレット ダイアグラムを@c
譜刻する際は、@ref{Common notation for fretted strings} の
@qq{フレット ダイアグラム マークアップ} を参照してください。

@end itemize

@morerefs
学習マニュアル:
@rlearning{Songs}

記譜法リファレンス:
@ref{Common notation for vocal music},
@ref{Displaying chords},
@ref{Displaying staves},
@ref{Keyboard and other multi-staff instruments},
@ref{Placing lyrics vertically},
@ref{Stanzas}

コード断片集:
@rlsr{Vocal music}


@node Lead sheets
@unnumberedsubsubsec リード譜

ボーカル パートと @q{和音モード} を組み合わせることによって、@c
リード譜を譜刻することができます。@c
和音モードの構文についての説明は @ref{Chord notation} にあります。

@snippets

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/simple-lead-sheet.ly}

@morerefs
記譜法リファレンス:
@ref{Chord notation}


@node Choral
@subsection 合唱

@cindex anthem (賛美歌)
@cindex part song (パート ソング)
@cindex oratorio (聖譚曲)
@cindex SATB (S: ソプラノ、A: アルト、T: テナー、B: バス)

このセクションでは、合唱との関連が最も強い記譜法について説明します。@c
合唱には、賛美歌、パート ソング、聖譚曲等が含まれます。


@node References for choral
@unnumberedsubsubsec 合唱のためのリファレンス

通常、合唱は @code{ChoirStaff} グループ内の 2, 3,
あるいは 4 つの譜に記譜します。@c
伴奏が必要であれば、合唱譜の下に @code{PianoStaff} グループを配置します。@c
@emph{アカペラ} のリハーサル譜であれば、普通は伴奏譜のサイズを小さくします。@c
各ボーカル パートの音符は @code{Voice} コンテキストの中に配置し、@c
各譜は単一のボーカル パート (つまり、1 つの @code{Voice})
あるいはボーカル パートのペア (つまり、2 つの @code{Voice})
を受け持ちます。

歌詞は @code{Lyrics} コンテキストの中に配置します。@c
各歌詞は対応するの譜の下に配置するか、
あるいは譜が 2 パートを保持している場合は 1 つを譜の上、@c

合唱に共通するいくつかのトピックスは別の場所で説明しています:

@itemize

@item
SATB (S: ソプラノ、A: アルト、T: テナー、B: バス) ボーカル譜の導入部は@c
学習マニュアルにあります。@c
@rlearning{Four-part SATB vocal score} を参照してください。@c
また、SATB ボーカル譜の作成を簡単にする組み込みのテンプレートがあります。@c
@rlearning{Built-in templates} を参照してください。

@item
学習マニュアルには、@c
様々なスタイルの合唱に適したいくつかのテンプレートもあります。@c
@rlearning{Vocal ensembles templates} を参照してください。

@item
@code{ChoirStaff} と @code{PianoStaff} についての情報は、@c
@ref{Grouping staves} を参照してください。

@item
セイクリッド ハープや動揺の記譜法で用いられるシェイプ符頭について、@c
@ref{Shape note heads} で説明しています。

@item
2 つのボーカル パートが 1 つの譜を共有する場合、@c
上のパートの符幹、タイ、スラー等は上向きになり、@c
下のパートは下向きになります。@c
これを実現するには、@code{\voiceOne} と @code{\voiceTwo} を用います。@c
@ref{Single-staff polyphony} を参照してください。

@item
ボーカル パートが一時的に分かれる場合は、@c
@emph{一時的に多声となる楽節} を使うべきです
(@ref{Single-staff polyphony} を参照してください)。

@end itemize

@predefined
@code{\oneVoice},
@code{\voiceOne},
@code{\voiceTwo}
@endpredefined

@morerefs
学習マニュアル:
@rlearning{Four-part SATB vocal score},
@rlearning{Vocal ensembles templates}

記譜法リファレンス:
@ref{Context layout order},
@ref{Grouping staves},
@ref{Shape note heads},
@ref{Single-staff polyphony}

コード断片集:
@rlsr{Vocal music}

内部リファレンス:
@rinternals{ChoirStaff},
@rinternals{Lyrics},
@rinternals{PianoStaff}


@node Score layouts for choral
@unnumberedsubsubsec 合唱のための楽譜レイアウト

通常、4 つの譜を保持している合唱のシステムは、@c
ピアノ伴奏があっても無くても、@c
ページ毎に 2 つ配置されます。@c
ページのサイズによっては、@c
これを実現するためにいくつかのデフォルト設定を変更する@c
必要があるかもしれません。@c
以下の設定を考慮する必要があります:

@itemize

@item
グローバル譜サイズを変更することで、@c
楽譜の要素全体のサイズを変更することができます。@c
@ref{Setting the staff size} を参照してください。

@item
システム、譜、それに歌詞の間隔はすべて独立して調節することができます。@c
@ref{Vertical spacing} を参照してください。

@item
垂直方向のレイアウト変数の値を表示することで、@c
垂直方向のスペースを調節する手助けとすることができます。@c
少ないページに音楽を収めるための方法として、@c
レイアウト変数の表示と他の事柄を @ref{Fitting music onto fewer pages}
で説明しています。

@item
ページ毎のシステム数を 1 から 2 に変更した場合、@c
そのことを示すために@c
慣例として 2 つのシステムの間にシステム セパレータを配置します。@c
@ref{Separating systems} を参照してください。

@item
他のページ フォーマット プロパティについての詳細は
@ref{Page layout} を参照してください。

@end itemize


強弱記号はデフォルトでは譜の下に配置されます。@c
しかしながら、合唱では歌詞を避けるために、@c
普通は強弱記号を譜の上に配置します。@c
あらかじめ定義されているコマンド @code{\dynamicUp} は
1 つの @code{Voice} コンテキストの強弱記号の配置を譜の上にします。@c
@code{Voice} コンテキストが複数ある場合、@c
このコマンドを各コンテキスト内に配置する必要があります。@c
代替手段として、強弱記号のプロパティを変更することで、
楽譜全体ですべての強弱記号を対応する譜の上に配置させることができます。@c
以下に方法を示します:

@lilypond[verbatim,quote]
\score {
  \new ChoirStaff <<
    \new Staff {
      \new Voice {
        \relative { g'4\f g g g }
      }
    }
    \new Staff {
      \new Voice {
        \relative { d'4 d d\p d }
      }
    }
  >>
  \layout {
    \context {
      \Score
      \override DynamicText.direction = #UP
      \override DynamicLineSpanner.direction = #UP
    }
  }
}
@end lilypond

@predefined
@code{\dynamicUp},
@code{\dynamicDown},
@code{\dynamicNeutral}
@endpredefined

@morerefs
記譜法リファレンス:
@ref{Changing spacing},
@ref{Displaying spacing},
@ref{Fitting music onto fewer pages},
@ref{Page layout},
@ref{Score layout},
@ref{Separating systems},
@ref{Setting the staff size},
@ref{Breaks},
@ref{Vertical spacing}

内部リファレンス:
@rinternals{VerticalAxisGroup},
@rinternals{StaffGrouper}

@snippets

@cindex voice, divided (ボイスの分割)
@cindex divided voices (ボイスの分割)
@cindex arpeggio bracket, marking divided voices (アルペジオ囲みによってボイスの分割を示す)
@cindex bracket, vertical, marking divided voices (縦方向の囲みによってボイスの分割を示す)

@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/using-arpeggiobracket-to-make-divisi-more-visible.ly}

@morerefs
記譜法リファレンス:
@ref{Expressive marks as lines}


@node Opera and stage musicals
@subsection オペラと舞台ミュージカル

通常、オペラや舞台ミュージカルの音楽、歌詞、それに会話は、@c
以下の形式の 1 つまたは複数により構築されます:

@itemize

@item
A @emph{指揮譜} はフル オーケストラとボーカル パート、台詞がある場合は@c
台詞の合図を保持します。

@item
@emph{オーケストラ パート} はオーケストラやバンドの個々の楽器の音楽を@c
保持します。

@item
@emph{ボーカル譜} は全てのボーカル パートとピアノ伴奏を保持します。@c
通常、伴奏はオーケストラの縮小版であり、@c
しばしばオーケストラのオリジナルの楽器名が示されます。@c
ボーカル譜に舞台指示や台詞の合図が含まれることもあります。

@item
@emph{ボーカル ブック} はボーカル パートだけを保持します
(伴奏はありません)。@c
台詞の合図が含まれることもあります。

@item
@emph{台詞} はミュージカルの台詞と歌詞を保持します。@c
普通は、舞台指示が含まれます。@c
LilyPond で台詞を譜刻することはできますが、台詞には音楽が無いため、@c
他の手段を用いる方が好ましいかもしれません。

@end itemize

オペラや舞台ミュージカルに共通するスタイルの楽譜を作り出すのに@c
必要なトピックスをカバーしているLilyPond ドキュメントのセクションを@c
以下のリファレンスで示します。@c
その後のセクションでオペラや舞台ミュージカルの譜刻に特有の@c
テクニックをカバーします。


@node References for opera and stage musicals
@unnumberedsubsubsec オペラや舞台ミュージカルのためのリファレンス

@itemize

@item
指揮譜は多くのグループ化された譜と歌詞を保持します。@c
譜をグループ化する方法は @ref{Grouping staves} で説明しています。@c
譜のグループをネストする方法は @ref{Nested staff groups} を参照してください。

@item
指揮譜とボーカル譜では、空の譜の譜刻を抑制することがあります。@c
そのような @qq{Frenched score} を作成する方法は
@ref{Hiding staves} を参照してください。

@item
オーケストラ パートを記述する方法は
@ref{Writing parts} でカバーしています。@c
オーケストラの楽器編成によっては、@c
専門的な記譜法の他のセクションも関係するかもしれません。@c
多くの楽器は移調楽器です -- @ref{Instrument transpositions}
を参照してください。

@item
ページのシステム数をページ毎に変える場合、@c
慣習的にシステムの間にシステム分離記号を配置します。@c
@ref{Separating systems} を参照してください。

@item
他のページ フォーマット プロパティの詳細は
@ref{Page layout} を参照してください。

@item
台詞の合図、舞台指示、それに脚注を挿入することができます
-- @ref{Creating footnotes} と @ref{Text} を参照してください。@c
2 つの @code{\score} の間に独立したセクションとして詳細な舞台指示を@c
追加することもできます -- @ref{Separate text} を参照してください。

@end itemize

@morerefs
音楽用語集:
@rglos{Frenched score},
@rglos{Frenched staves},
@rglos{transposing instrument}

記譜法リファレンス:
@ref{Creating footnotes},
@ref{Grouping staves},
@ref{Hiding staves},
@ref{Instrument transpositions},
@ref{Nested staff groups},
@ref{Page layout},
@ref{Separating systems},
@ref{Transpose},
@ref{Writing parts},
@ref{Writing text}

コード断片集:
@rlsr{Vocal music}


@node Character names
@unnumberedsubsubsec 役名

@cindex character name (役名)
@cindex name, character (役名)

通常、1 つの役に割り当てられている譜には左側に役名を示します:

@lilypond[quote,verbatim,ragged-right]
\score {
  <<
    \new Staff {
      \set Staff.vocalName = \markup \smallCaps Kaspar
      \set Staff.shortVocalName = \markup \smallCaps Kas.
      \relative {
        \clef "G_8"
        c'4 c c c
        \break
        c4 c c c
      }
    }
    \new Staff {
      \set Staff.vocalName = \markup \smallCaps Melchior
      \set Staff.shortVocalName = \markup \smallCaps Mel
      \clef "bass"
      \relative {
        a4 a a a
        a4 a a a
      }
    }
  >>
}
@end lilypond

複数の役が 1 つの譜を共有する場合、@c
それぞれの役に適用されるセクションの開始時に、その役名を譜の上に譜刻します。
これは、マークアップで実現できます。@c
しばしば、この目的のために専用のフォントを用います。

@lilypond[quote,verbatim]
\relative c' {
  \clef "G_8"
  c4^\markup \fontsize #1 \smallCaps Kaspar
  c c c
  \clef "bass"
  a4^\markup \fontsize #1 \smallCaps Melchior
  a a a
  \clef "G_8"
  c4^\markup \fontsize #1 \smallCaps Kaspar
  c c c
}
@end lilypond

役の入れ替えが頻繁にある場合、@c
それぞれの役の定義を保持した変数を作り、@c
役の入れ替えを容易に、そして正確に示す方が簡単かもしれません。

@lilypond[quote,verbatim]
kaspar = {
  \clef "G_8"
  \set Staff.shortVocalName = "Kas."
  \set Staff.midiInstrument = "voice oohs"
  <>^\markup \smallCaps "Kaspar"
}

melchior = {
  \clef "bass"
  \set Staff.shortVocalName = "Mel."
  \set Staff.midiInstrument = "choir aahs"
  <>^\markup \smallCaps "Melchior"
}

\relative c' {
  \kaspar
  c4 c c c
  \melchior
  a4 a a a
  \kaspar
  c4 c c c
}
@end lilypond

@morerefs
学習マニュアル:
@rlearning{Organizing pieces with variables}

記譜法リファレンス:
@ref{Text},
@ref{Text markup commands}


@node Musical cues
@unnumberedsubsubsec 合図

@cindex musical cue (合図)
@cindex cue, musical (合図)

入りの直前にある他のパートの音楽を示すため、@c
合図をボーカル譜、ボーカル ブック、それにオーケストラ パートに@c
挿入することができます。@c
さらに、合図はボーカル譜のピアノ伴奏にもしばしば挿入され、@c
どのオーケストラ楽器が演奏されるのかを示します。@c
これはフルの指揮譜を使用できない場合に、指揮者の助けとなります。

合図を挿入する基本的な仕組みはメインのテキストで完全に説明しています
-- @ref{Quoting other voices} と @ref{Formatting text} を@c
参照してください。@c
しかしながら、多くの合図を挿入する必要がある場合
-- 例えば、ボーカル譜のピアノ伴奏に楽器名を入れる場合、@c
楽器名を合図音符の直前に注意深く配置する必要があります。@c
以下の例は、これを実現する方法を示しています。

@c KEEP LY
@lilypond[quote,verbatim]
flute = \relative {
  s4 s4 e'' g
}
\addQuote "flute" { \flute }

pianoRH = \relative {
  c''4. g8
  % 合図音符の楽器名を、合図音符の直前、かつ譜の上に配置します
  <>^\markup { \right-align { \tiny "Flute" } }
  \cueDuring "flute" #UP { g4 bes4 }
}
pianoLH = \relative { c4 <c' e> e, <g c> }

\score {
  \new PianoStaff <<
    \new Staff {
      \pianoRH
    }
    \new Staff {
      \clef "bass"
      \pianoLH
    }
  >>
}
@end lilypond

移調楽器が引用される場合、@c
その楽器の合図音符が自動的に変換されるよう、@c
楽器パートでキーを指定しておく必要があります。@c
以下の例は B-フラットのクラリネットの移調を示しています。@c
この例では合図音符は譜の下方に配置されるため、@c
@code{\cueDuring} の中で @code{DOWN} を指定し
(これにより、符幹が下向きになります)、@c
楽器名を譜の下に配置しています。@c

@c KEEP LY
@lilypond[quote,verbatim]
clarinet = \relative c' {
  \transposition bes
  fis4 d d c
}
\addQuote "clarinet" { \clarinet }

pianoRH = \relative c'' {
  \transposition c'
  % 合図音符の楽器名を譜の下に配置します
  <>_\markup { \right-align { \tiny "Clar." } }
  \cueDuring "clarinet" #DOWN { c4. g8 }
  g4 bes4
}
pianoLH = \relative { c4 <c' e> e, <g c> }

\score {
  <<
    \new PianoStaff <<
      \new Staff {
        \new Voice {
          \pianoRH
        }
      }
      \new Staff {
        \clef "bass"
        \pianoLH
      }
    >>
  >>
}
@end lilypond

上記の 2 例から、ボーカル譜に多くの合図を挿入することは退屈な作業で、@c
入力ファイルでピアノ パートの音符が不明瞭になることは明白です。@c
しかしながら、以下のコード断片で示すように、@c
タイピングを減らして、ピアノの音符を明瞭にする音楽関数を定義することが可能です。

@cindex vocal score, adding cues (歌曲で合図を追加する)
@cindex score, vocal, adding cues (歌曲で合図を追加する)
@cindex cue, in vocal score (歌曲における合図)
@snippets
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/adding-orchestral-cues-to-a-vocal-score.ly}

@morerefs
音楽用語集:
@rglos{cue-notes}

記譜法リファレンス:
@ref{Aligning objects},
@ref{Direction and placement},
@ref{Formatting cue notes},
@ref{Quoting other voices},
@ref{Using music functions}

コード断片集:
@rlsr{Vocal music}

内部リファレンス:
@rinternals{CueVoice}

@knownissues
@code{\cueDuring} は自動的に @code{CueVoice} コンテキストを挿入し、@c
すべての合図音符がこのコンテキストの中に配置されます。@c
このことは、この方法では 1 つの合図音符の途中には@c
他の合図音符を挿入することはできないということを意味します。@c
これを行うには、@c
別々の @code{CueVoice} コンテキストを明示的に宣言して、@c
合図音符の抽出と挿入に @code{\quoteDuring} を用います。

@node Spoken music
@unnumberedsubsubsec 語り音楽

@cindex parlato
@cindex Sprechgesang

@q{parlato} や @q{Sprechgesang} などのエフェクトは、@c
演者にピッチを持たずに、しかしながらリズムを持ちながら話すことを要求します。@c
これは、@ref{Special note heads} で示すように、×の符頭で記譜します。

@c TODO add "marking-notes-on-spoken-parts" snippet -vv
@c add "showing the rhythm of a melody" snip
@c add "one staff-line notation"
@c add "improvisation" ref
@c add "lyrics independents of notes" ref

@node Dialogue over music
@unnumberedsubsubsec 音楽の中での会話

通常、音楽の中での会話は譜の上にイタリック体で譜刻され、@c
各フレーズの開始は特定の音楽イベントに紐付けられます。

短いフレーズであれば、単純なマークアップ接尾辞を用います。

@lilypond[quote,verbatim]
\relative {
  a'4^\markup { \smallCaps { Alex - } \italic { He's gone } } a a a
  a4 a a^\markup { \smallCaps { Bethan - } \italic Where? } a
  a4 a a a
}
@end lilypond

長いフレーズの場合は、@c
フレーズをきちんと収められるよう楽譜を拡張する必要があるかもしれません。
LilyPond はこれを完全に自動的に行う機能を備えておらず、@c
ページをレイアウトするために何らかの手作業が必要です。

密に詰め込まれた長い会話を持つフレーズやパッセージでは、@c
Lyrics コンテキストを用いると良い結果を得られます。@c
この Lryics コンテキストをボイスに関連付けすべきではなく、@c
代わりに会話の各セクションの演奏時間を明示的に指定します。@c
会話にずれがある場合、@c
会話から最後の言葉を分離させて、それぞれに演奏時間を割り当てることで、@c
下の音楽に対してスムーズに配置されます。

会話が複数行に広がる場合、手動で @code{\break} を挿入して、@c
右マージンが不足しないよう会話の配置を調節する必要があります。@c
各行の最終小節に配置される最後の単語も上記と同様に分離させる必要があります。

ここで、これまで述べてきたことを行う例を挙げます:

@c This should be a snippet, but it can't be as it needs to be
@c manually adjusted to suit the imposed line length.  -td

@lilypond[quote,verbatim,ragged-right]
music = \relative {
  \repeat unfold 3 { a'4 a a a }
}

dialogue = \lyricmode {
  \markup {
    \fontsize #1 \upright \smallCaps Abe:
    "Say this over measures one and"
  }4*7
  "two"4 |
  \break
  "and this over measure"4*3
  "three"4 |
}

\score {
  <<
    \new Lyrics \with {
      \override LyricText.font-shape = #'italic
      \override LyricText.self-alignment-X = #LEFT
    }
    { \dialogue }
    \new Staff {
      \new Voice { \music }
    }
  >>
}
@end lilypond

@c TODO show use of \column to produce dialogue on two lines

@morerefs
記譜法リファレンス:
@ref{Manual syllable durations},
@ref{Text}

内部リファレンス:
@rinternals{LyricText}


@node Chants psalms and hymns
@subsection 聖歌と賛美歌

@cindex chant (詠唱)
@cindex psalm (聖歌)
@cindex hymn (賛美歌)
@cindex canticle (雅歌)
@cindex religious music (宗教音楽)

通常、詠唱、聖歌、それに賛美歌の音楽と言葉は@c
特定の教会で確立されたフォーマットに従います。@c
教会毎にフォーマットが異なりますが、@c
発生する譜刻の問題は概して共通していて、このセクションでカバーします。


@node References for chants and psalms
@unnumberedsubsubsec 聖歌と賛美歌のためのリファレンス

グレゴリオ聖歌を様々なスタイルの古代記譜法で譜刻する方法を
@ref{Ancient notation} で説明しています。

@morerefs
記譜法リファレンス:
@ref{Ancient notation}

コード断片集:
@rlsr{Vocal music}


@node Setting a chant
@unnumberedsubsubsec 聖歌を設定する

現代の聖歌のための設定では、@c
種々の古代記譜法の要素を加えた現代の記譜法を用います。@c
考慮すべき要素や手法のいくつかを以下で示します。

聖歌ではしばしば、符幹の無い 4 分音符でピッチを示します。@c
リズムは単語の音声リズムから取ります。

@lilypond[verbatim,quote]
stemOff = { \hide Staff.Stem }

\relative c' {
  \stemOff
  a'4 b c2 |
}

@end lilypond

聖歌ではしばしば小節線を省略したり、@c
短い小節線や点線の小節線を用いて音楽の一時停止を示したりします。@c
譜の小節線をすべて省略するには、小節線エングラーバを完全に削除します:

@lilypond[verbatim,quote]
\score {
  \new StaffGroup <<
    \new Staff {
      \relative {
        a'4 b c2 |
        a4 b c2 |
        a4 b c2 |
      }
    }
    \new Staff {
      \relative {
        a'4 b c2 |
        a4 b c2 |
        a4 b c2 |
      }
    }
  >>
  \layout {
    \context {
      \Staff
      \remove Bar_engraver
    }
  }
}
@end lilypond

譜毎に小節線を削除することもできます:

@lilypond[verbatim, quote]
\score {
  \new ChoirStaff <<
    \new Staff
    \with { \remove Bar_engraver } {
      \relative {
        a'4 b c2 |
        a4 b c2 |
        a4 b c2 |
      }
    }
    \new Staff {
      \relative {
        a'4 b c2 |
        a4 b c2 |
        a4 b c2 |
      }
    }
  >>
}
@end lilypond

譜の一部の小節線だけを削除するには、@c
その部分を即興 (カデンツァ) として扱います。@c
小節線を削除する範囲が長い場合、@c
改行位置を示すためにダミーの小節線 @code{\bar ""} を挿入する必要が@c
あるかもしれません。

@lilypond[verbatim,quote]
\relative a' {
  a4 b c2 |
  \cadenzaOn
  a4 b c2
  a4 b c2
  \bar ""
  a4 b c2
  a4 b c2
  \cadenzaOff
  a4 b c2 |
  a4 b c2 |
}
@end lilypond

小節線を変更することによって、聖歌の休止や一時停止を示すことができます。

@lilypond[verbatim, quote]
\relative a' {
  a4
  \cadenzaOn
  b c2
  a4 b c2
  \bar "'"
  a4 b c2
  a4 b c2
  \bar ";"
  a4 b c2
  \bar "!"
  a4 b c2
  \bar "||"
}
@end lilypond

現代の記譜法を用いながらも、@c
休止や一時停止にグレゴリオ聖歌で用いられる記譜法を用いる場合もあります。@c
これには @code{\breathe} 記号を変更して使います:

@lilypond[verbatim,quote]
divisioMinima = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::divisio-minima
  \once \override BreathingSign.Y-offset = #0
  \breathe
}
divisioMaior = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::divisio-maior
  \once \override BreathingSign.Y-offset = #0
  \breathe
}
divisioMaxima = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::divisio-maxima
  \once \override BreathingSign.Y-offset = #0
  \breathe
}
finalis = {
  \once \override BreathingSign.stencil = #ly:breathing-sign::finalis
  \once \override BreathingSign.Y-offset = #0
  \breathe
}

\score {
  \relative {
    g'2 a4 g
    \divisioMinima
    g2 a4 g
    \divisioMaior
    g2 a4 g
    \divisioMaxima
    g2 a4 g
    \finalis
  }
  \layout {
    \context {
      \Staff
      \remove Bar_engraver
    }
  }
}
@end lilypond

聖歌は通常、拍子記号を省略し、しばしば音部記号も省略します。

@lilypond[verbatim,quote]
\score {
  \new Staff {
    \relative {
      a'4 b c2 |
      a4 b c2 |
      a4 b c2 |
    }
  }
  \layout {
    \context {
      \Staff
      \remove Bar_engraver
      \remove Time_signature_engraver
      \remove Clef_engraver
    }
  }
}
@end lilypond

通常、英国教会の伝統的な聖歌は @emph{シングル} -- 7 小節の音楽 -- か、@c
@emph{ダブル} -- 7 小節の音楽を 2 組 -- のどちらかです。@c
歌詞の各節が半分に分けられるのに対応して、@c
7 小節の各グループは半分に分けられ、通常は 2 重小節線で区切られます。@c
使われる音符は全音符と半音符だけです。@c
半分に分けられたグループの最初の小節は常に全音符の和音を保持します。@c
これが @qq{主要音} です。@c
通常、聖歌はページの中央に配置されます。

@c KEEP LY
@lilypond[verbatim,quote]
SopranoMusic = \relative {
  g'1 | c2 b | a1 | \bar "||"
  a1 | d2 c | c b | c1 | \bar "||"
}

AltoMusic = \relative {
  e'1 | g2 g | f1 |
  f1 | f2 e | d d | e1 |
}

TenorMusic = \relative {
  c'1 | c2 c | c1 |
  d1 | g,2 g | g g | g1 |
}

BassMusic =  \relative {
  c1 | e2 e | f1 |
  d1 | b2 c | g' g | c,1 |
}

global = {
  \time 2/2
}

% マークアップを使って聖歌をページの中央に配置します
\markup {
  \fill-line {
    \score {  % 中央揃え
      <<
        \new ChoirStaff <<
          \new Staff <<
            \global
            \clef "treble"
            \new Voice = "Soprano" <<
              \voiceOne
              \SopranoMusic
            >>
            \new Voice = "Alto" <<
              \voiceTwo
              \AltoMusic
            >>
          >>
          \new Staff <<
            \clef "bass"
            \global
            \new Voice = "Tenor" <<
              \voiceOne
              \TenorMusic
            >>
            \new Voice = "Bass" <<
              \voiceTwo
              \BassMusic
            >>
          >>
        >>
      >>
      \layout {
        \context {
          \Score
          \override SpacingSpanner.base-shortest-duration = \musicLength 2
        }
        \context {
          \Staff
          \remove Time_signature_engraver
        }
      }
    }  % score の終わり
  }
}  % markup の終わり
@end lilypond

このような聖歌を設定するための他のアプローチを以下の最初のコード断片で示します。

@snippets

@cindex chant (詠唱)
@cindex psalm (聖歌)
@cindex hymn (賛美歌)
@cindex canticle (雅歌)
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/chant-or-psalms-notation.ly}

@c XXX move this text into following snippet
雅歌や他の典礼書の設定はもっと自由度が高く、@c
古代音楽の記譜要素を使うかもしれません。@c
しばしば単語を譜の下に音符に揃えて配置します。@c
そのような場合、音符の間隔を音符の演奏時間ではなく、音節に合わせます。

@cindex Gregorian music, modern transcription (グレゴリオ聖歌の現代譜への転写)
@cindex transcription, modern of Gregorian music (グレゴリオ聖歌の現代譜への転写)
@cindex modern transcription of Gregorian music (グレゴリオ聖歌の現代譜への転写)
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/ancient-notation-template----modern-transcription-of-gregorian-music.ly}

@morerefs
学習マニュアル:
@rlearning{Visibility and color of objects},
@rlearning{Vocal ensembles templates}

記譜法リファレンス:
@ref{Ancient notation},
@ref{Bar lines},
@ref{Modifying context plug-ins},
@ref{Typesetting Gregorian chant},
@ref{Unmetered music},
@ref{Visibility of objects}

@node Pointing a psalm
@unnumberedsubsubsec 賛美歌を配置する

通常、英国教会の聖歌の歌詞は曲とは別に楽譜の下の中央に譜刻されます。

シングルの聖歌 (7 小節) は歌詞の節毎に繰り返されます。@c
ダブルの聖歌 (14 小節) は歌詞の節のペア毎に繰り返されます。@c
歌詞をどのように聖歌に当てはめるかを示すために記号が挿入されます。@c
歌詞の各節は 2 つに分割されます。@c
通常、この分割を示すためにコロンが用いられます。@c
これは楽譜の 2 重小節線に対応します。@c
コロンの前にある歌詞は楽譜の最初の 3 小節で歌われ、@c
コロンの後にある歌詞は次の 4 小節で歌われます。

楽譜の小節線に対応して、歌詞に単線の小節線
(あるいはカンマを逆さまにしたような記号) が挿入されます。@c
マークアップ モードでは、@c
小節線を小節チェック記号 @code{|} で挿入することができます。

@lilypond[verbatim,quote]
\markup {
  \fill-line {
    \column {
      \left-align {
        \line { O come let us sing | unto the | Lord : let }
        \line { us heartily rejoice in the | strength of | our }
        \line { sal- | -vation. }
      }
    }
  }
}
@end lilypond

@code{fetaMusic} フォントの図柄を必要とする記号があるかもしれません。@c
詳細は @ref{Fonts} を参照してください。

@lilypond[verbatim,quote]
tick = \markup {
  \raise #1 \fontsize #-5 \musicglyph "scripts.rvarcomma"
}
\markup {
  \fill-line {
    \column {
      \left-align {
        \line { O come let us sing \tick unto the \tick Lord : let }
        \line {
          us heartily rejoice in the \tick strength of \tick our
        }
        \line { sal \tick vation. }
      }
    }
  }
}
@end lilypond

1 小節に 1 つの全音符が配置されている場合、@c
その小節に対応する歌詞は音読のリズムで朗読されます。@c
1 小節に 2 つの音符が配置されている場合、@c
普通はそれに対応する歌詞には 1 つまたは 2 つの音節しかありません。@c
3 以上の音節がある場合、@c
普通は音符が変わる場所を示すためにドット (中黒) が挿入されます。

@lilypond[verbatim,quote]
dot = \markup {
  \raise #0.7 \musicglyph "dots.dot"
}
tick = \markup {
  \raise #1 \fontsize #-5 \musicglyph "scripts.rvarcomma"
}
\markup {
  \fill-line {
    \column {
      \left-align {
        \line {
          O come let us sing \tick unto \dot the \tick Lord : let
        }
        \line {
          us heartily rejoice in the \tick strength of \tick our
        }
        \line { sal \tick vation. }
      }
    }
  }
}
@end lilypond

聖歌の中には朗読セクションの終わりを示すために@c
カンマの代わりにアスタリスクを用いて、@c
強調したり長く伸ばしたりする音節をボールド体で示すものがあります。@c

@lilypond[verbatim,quote]
dot = \markup {
  \raise #0.7 \musicglyph "dots.dot"
}
tick = \markup {
  \raise #1 \fontsize #-5 \musicglyph "scripts.rvarcomma"
}
\markup {
  \fill-line {
    \column {
      \left-align {
        \line { Today if ye will hear his voice * }
        \line {
          \concat { \bold hard en }
          | not your | hearts : as in the pro-
        }
        \line { vocation * and as in the \bold day of tempt- | }
        \line { -ation | in the | wilderness. }
      }
    }
  }
}
@end lilypond

また、強調する音節の上にアクセント記号を配置する聖歌もあります。

@lilypond[verbatim,quote]
tick = \markup {
  \raise #2 \fontsize #-5 \musicglyph "scripts.rvarcomma"
}
\markup {
  \fill-line {
    \column {
      \left-align {
        \line {
          O come let us \concat {
            si \combine \tick ng
          }
          | unto the | Lord : let
        }
        \line {
          us heartily \concat {
            rejo \combine \tick ice
          }
          in the | strength of | our
        }
        \line { sal- | -vation. }
      }
    }
  }
}
@end lilypond

マークアップを使用してテキストを中央に配置し、@c
テキスト行をいくつかの列に配列する方法は、@c
@ref{Formatting text} で説明しています。

これらの要素のほとんどをテンプレートの歌詞で示しています。@c
@rlearning{Psalms} を参照してください。

@morerefs
学習マニュアル:
@rlearning{Psalms},
@rlearning{Vocal ensembles templates}

記譜法リファレンス:
@ref{Fonts},
@ref{Formatting text}


@node Partial measures in hymn tunes
@unnumberedsubsubsec 賛美歌での部分小節

しばしば、賛美歌は各行の始めと終わりを部分小節として、@c
楽譜の各行がテキストの各行にうまく対応させます。@c
これを行うには音楽の始めに @code{\partial} コマンドを配置して、@c
各行の終わりに @code{\bar "|"} または @code{\bar "||"} を配置する必要が@c
あります。

@cindex hymn, and partial measures (賛美歌と部分小節)
@cindex partial measure, in hymns (賛美歌での部分小節)
@cindex measure, partial, in hymns (賛美歌での部分小節)
@lilypondfile[verbatim,quote,ragged-right,texidoc,doctitle]
{snippets/hymn-template.ly}


@node Ancient vocal music
@subsection 古代の声楽

古代の声楽がサポートされます。@c
@ref{Ancient notation} で説明しています。

@c TODO

@c Add "Printing both the ancient and the modern clef in vocal music" snippet,
@c and "Transcription of Ancient music with incipit" snippet. -vv

@morerefs
記譜法リファレンス:
@ref{Ancient notation}
